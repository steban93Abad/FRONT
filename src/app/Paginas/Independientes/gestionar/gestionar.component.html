<app-header></app-header>
<app-sidebar></app-sidebar>
<div class="content-wrapper">
    <div class="container-fluid">
        <h4 class="NombrePage">
            {{PaginaEstilo === '' ?
            (TituloFormulario != '' ?
            Cliente:'Mis Clientes'):'Visualización'}}
        </h4>
        <!-- BARRA CON FILTRO PARA MIS CLIENTES -->
        <section class="content" *ngIf="PaginaEstilo == '' && TituloFormulario == ''">
            <div class="container-fluid">
                <form [formGroup]="BuscarForms">
                    <div class="row mb-2">
                        <div class="accordion" id="AcordionParametrosBus">
                            <div class="accordion-item">
                                <div class="card-header">
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                                            <div class="form-floating">
                                                <input type="text" class="form-control" id="identificacion"
                                                    placeholder="" formControlName="identificacion">
                                                <label class="truncate-text" for="identificacion">Cédula</label>
                                            </div>
                                        </div>
                                        <div class="col-lg-3 col-md-5 col-sm-6 col-12 mt-2">
                                            <button type="button" class="btnBuscar  ml-2"
                                                (click)="ListarElementos(1)"><i
                                                    class="fa-solid fa-magnifying-glass"></i>&nbsp;Buscar</button>

                                            <button type="button" class="btnLimpiar ml-2"
                                                (click)="ResetClienteForms()"><i
                                                    class="fa-solid fa-trash-can"></i></button>
                                            <button *ngIf="this.ListaGestionar.length>0" class="btnImprimir ml-2"
                                                data-toggle="dropdown"><i class="bi bi-printer"></i></button>
                                            <div class="dropdown-menu" role="menu1">
                                                <a class="dropdown-item col-md-4" (click)="GetDescargaPor(d)"
                                                    *ngFor="let d of ParametrosDeDescarga">{{d}}</a>
                                            </div>


                                        </div>
                                        <div class="col">
                                            <div class="row  justify-content-end">
                                                <div class="col">
                                                    <div class="float-right clearfix">
                                                        <button class="accordion-button collapsed" type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#MasParametrosBusqueda"
                                                            aria-expanded="false" aria-controls="MasParametrosBusqueda">
                                                            Más opciones &nbsp;
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div id="MasParametrosBusqueda" class="accordion-collapse collapse"
                                    data-bs-parent="#AcordionParametrosBus">
                                    <div class="accordion-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-2 col-sm-3 col-6">
                                                <div class="form-floating">
                                                    <input type="text" class="form-control" id="nombres_cliente"
                                                        placeholder="" formControlName="nombres_cliente">
                                                    <label class="truncate-text" for="nombres_cliente">Nombres</label>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                                                <div class="form-group">
                                                    <span title="Cantidad de meses sin gestión">Cartera</span>

                                                    <select style="height: 35px;" class="form-select"
                                                        formControlName="cartera">
                                                        <option *ngIf="CarteraGestor.length == 0" disabled>Cargando
                                                            ...
                                                        </option>
                                                        <option [value]="0"
                                                            *ngIf="Rol != 'ADMINISTRADOR' && Rol != 'SUPERVISOR'">Todas
                                                        </option>
                                                        <option *ngFor="let s of CarteraGestor" [value]="s.cart_id">
                                                            {{s.cart_descripcion+' '+s.cart_tip_descripcion}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                                                <div class="form-group">
                                                    <span title="Cantidad de meses sin gestión">Contactabilidad</span>

                                                    <select style="height: 35px;" class="form-select"
                                                        (click)="ListaContactabilidad.length == 0?ListarContactabilidad():null"
                                                        formControlName="contactabilidad">
                                                        <option *ngIf="ListaContactabilidad.length == 0" disabled>
                                                            Cargando...
                                                        </option>
                                                        <option [value]="0">Todas</option>
                                                        <option *ngFor="let s of ListaContactabilidad"
                                                            [value]="s.id_contactabilidad">
                                                            {{s.contac_descripcion}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                                                <div class="form-group">
                                                    <span title="Cantidad de meses sin gestión">Gestor</span>

                                                    <select style="height: 35px;" class="form-select"
                                                        (click)="ListaGestores.length == 0?ListarGestores():null"
                                                        formControlName="gestor">
                                                        <option *ngIf="ListaGestores.length == 0" disabled>
                                                            Cargando...
                                                        </option>
                                                        <option [value]="0">Todos</option>
                                                        <option *ngFor="let s of ListaGestores" [value]="s.id_gestor">
                                                            {{s.ges_nombres+' '+s.ges_apellidos}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                                <div class="form-floating mb-3" title="Cantidad de meses sin gestión">
                                                    <input type="number" class="form-control small" id="meses"
                                                        placeholder="" formControlName="meses">
                                                    <label class="truncate-text" for="meses">Meses sin Gest.</label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                                                <div class="form-floating mb-3">
                                                    <input type="number" class="form-control small" id="monto_min"
                                                        placeholder="" formControlName="monto_min">
                                                    <label class="truncate-text" for="monto_min">Monto desde</label>
                                                </div>
                                            </div>

                                            <div class="col-lg-3 col-md-4 col-sm-6 col-6">
                                                <div class="form-floating mb-3">
                                                    <input type="number" class="form-control small" id="monto_max"
                                                        placeholder="" formControlName="monto_max">
                                                    <label class="truncate-text" for="monto_max">Monto Hasta</label>
                                                </div>
                                            </div>

                                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                                <div class="form-group">
                                                    <span title="Cantidad de meses sin gestión">Tiene Pago</span>
                                                    <small>
                                                        <select class="form-select" formControlName="pago">
                                                            <option *ngIf="OpcionesPagos.length == 0" disabled>
                                                                Cargando ...
                                                            </option>
                                                            <option *ngFor="let s of OpcionesPagos" [value]="s.value">
                                                                {{s.name}}
                                                            </option>
                                                        </select>
                                                    </small>
                                                </div>
                                            </div>

                                            <div class="col-lg-2 col-md-4 col-sm-6 col-6">
                                                <div class="form-group">
                                                    <span title="Cantidad de meses sin gestión">Prioridad</span>
                                                    <small>
                                                        <select class="form-select" formControlName="prioridad">
                                                            <option *ngIf="OpcionesPrioridades.length == 0" disabled>
                                                                Cargando ...
                                                            </option>
                                                            <option *ngFor="let s of OpcionesPrioridades"
                                                                [value]="s.value">
                                                                {{s.name}}
                                                            </option>
                                                        </select>
                                                    </small>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                    </div>
                </form>

            </div>

        </section>
        <!-- Barra para buscar CONSULTAS -->
        <section *ngIf="PaginaEstilo != '' && TituloFormulario == ''">
            <form [formGroup]="BuscarForms">
                <div class="form-row">

                    <div class="col-lg-4 col-md-5 col-sm-5 col-12">
                        <div class="row Centrar">
                            <div class="col-lg-4 col-md-4 col-sm-6 col-12">
                                <label class="truncate-text" for="">Buscar Por:</label>
                            </div>
                            <div class="col-lg-8 col-md-8 col-sm-6 col-12">
                                <select class="form-select" [formControl]="TipoBusquedaGeneral">
                                    <option *ngFor="let s of OpcionesBusqueda" [value]="s.value">
                                        {{s.name}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-3 col-sm-3 col-12">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control " id="cliente" placeholder=""
                                [formControl]="ValorBusquedaGeneral">
                            <label class="truncate-text" for="cliente">Buscar</label>
                        </div>
                    </div>

                    <div class="col-lg-3 col-md-3 col-sm-4 col-12">
                        <button type="button" class="btnBuscar  ml-2" (click)="BuscarClienteGeneral()"><i
                                class="fa-solid fa-magnifying-glass"></i>&nbsp;Buscar</button>
                        <button type="button" class="btnLimpiar ml-2" (click)="EncerarClienteGeneral()"><i
                                class="fa-solid fa-trash-can"></i></button>
                    </div>
                </div>
            </form>
        </section>

        <section class="content">
            <div class="container-fluid">
                <div class="card card-default">
                    <!-- FORMULARIO PARA AGREGAR ELEMENTOS -->
                    <section *ngIf="TituloFormulario != ''">
                        <!-- Cerrar VENTANA -->
                        <section>
                            <div class="card-header  card-outline">
                                <div class="card-tools">
                                    <button type="button" class="btn btn-danger btn-sm"
                                        (click)="CerrarAgregarEditarElemento()">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </section>


                        <!-- formularios de informacion -->
                        <section class="content mt-2">
                            <div class="container-fluid">
                                <!-- INFORMACION DEL CLIENTE Y CONTACTOS -->
                                <section class="row">
                                    <!-- informacion de cliente -->
                                    <section class="col-lg-7 connectedSortable ui-sortable" *ngIf="ClienteInf">

                                        <div class="card direct-chat direct-chat-primary">
                                            <div class="card-header card-info card-outline">
                                                <h3 class="card-title">Datos Personales</h3>
                                                <div class="card-tools">
                                                    <button type="button" class="btn btn-tool"
                                                        data-card-widget="collapse">
                                                        <i class="fas fa-minus"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <div class="card-body small">
                                                <div class="row" *ngIf="ClienteInf as cli">
                                                    <div class="col-md-3">

                                                        <div class="">
                                                            <div class="box-profile">
                                                                <div class="text-center">
                                                                    <img class="profile-user-img img-fluid img-circle"
                                                                        src="./assets/Imagenes/user2-160x160.jpg"
                                                                        alt="User profile picture">
                                                                </div>
                                                                <h5 class="text-center">
                                                                    <strong class="small">{{cli.cli_nombres}}</strong>
                                                                </h5>
                                                                <p class="text-center">
                                                                    <strong>Edad:&nbsp;</strong>{{fechas.calcularEdad(cli.cli_fecha_nacimiento)}}&nbsp;años
                                                                </p>
                                                            </div>

                                                        </div>


                                                    </div>

                                                    <div class="col-md-9">
                                                        <div class="row">
                                                            <div class="col-6">
                                                                <h6>Id: {{cli.cli_identificacion}}
                                                                </h6>
                                                            </div>
                                                            <div class="col-6">
                                                                <h6>
                                                                    <small class=""><strong>F.
                                                                            Nacimiento</strong>:
                                                                        {{fechas.fechaCortaAbt(cli.cli_fecha_nacimiento)}}</small>
                                                                </h6>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-6">
                                                                <h6>Género:
                                                                    <small>
                                                                        {{cli.cli_genero ==
                                                                        'M'?'Masculino':cli.cli_genero ==
                                                                        'F'?'Femenino':'No responde'}}
                                                                    </small>
                                                                </h6>
                                                            </div>
                                                            <div class="col-6">
                                                                <h6>
                                                                    <small class=""><strong>
                                                                            Estado Civil
                                                                        </strong>:
                                                                        {{cli.cli_estado_civil ==
                                                                        '1'?'Soltero/a':cli.cli_estado_civil ==
                                                                        '2'?'Casado/a':cli.cli_estado_civil ==
                                                                        '3'?'Divorciado/a'
                                                                        :cli.cli_estado_civil ==
                                                                        '4'?'Viudo/a':cli.cli_estado_civil ==
                                                                        '5'?'Union-Libre':'No especificado'}}
                                                                    </small>
                                                                </h6>
                                                            </div>

                                                        </div>
                                                        <!-- <div class="row invoice-info">
                                                            <div class="col-sm-4 invoice-col">
                                                                <div *ngIf="cli.cli_genero">
                                                                    <strong>Genero</strong><br>
                                                                    <div class="text-muted">{{cli.cli_genero == 'M'?'Masculino':cli.cli_genero == 'F'?'Femenino':'No responde'}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-4 invoice-col">
                                                                <div *ngIf="cli.cli_estado_civil">
                                                                    <strong>Estado Civil</strong><br>
                                                                    <div class="text-muted">
                                                                        {{cli.cli_estado_civil == '1'?'Soltero/a':cli.cli_estado_civil == '2'?'Casado/a':cli.cli_estado_civil == '3'?'Divorciado/a'
                                                                        :cli.cli_estado_civil == '4'?'Viudo/a':cli.cli_estado_civil == '5'?'Union-Libre':'No especificado'}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div> -->
                                                        <div class="row invoice-info">
                                                            <div class="col-sm-4 invoice-col">
                                                                <div *ngIf="cli.cli_ocupacion">
                                                                    <strong>Ocupación</strong><br>
                                                                    <div class="text-muted">{{cli.cli_ocupacion}}</div>
                                                                </div>
                                                                <div *ngIf="cli.cli_sit_laboral">
                                                                    <strong>Situación Laboral</strong><br>
                                                                    <div class="text-muted">{{cli.cli_sit_laboral}}
                                                                    </div>
                                                                </div>
                                                                <div *ngIf="cli.cli_observacion">
                                                                    <strong>Observación</strong><br>
                                                                    <div class="text-muted">{{cli.cli_observacion}}
                                                                    </div>
                                                                </div>
                                                                <div *ngIf="cli.cli_ruc">
                                                                    <strong>Ruc</strong><br>
                                                                    <div class="text-muted">{{cli.cli_ruc}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-4 invoice-col">
                                                                <div *ngIf="cli.cli_provincia">
                                                                    <strong>Provincia</strong><br>
                                                                    <div class="text-muted">{{cli.cli_provincia}}</div>
                                                                </div>
                                                                <div *ngIf="cli.cli_canton">
                                                                    <strong>Cantón</strong><br>
                                                                    <div class="text-muted">{{cli.cli_canton}}</div>
                                                                </div>
                                                                <div *ngIf="cli.cli_parroquia">
                                                                    <strong>Parroquia</strong><br>
                                                                    <div class="text-muted">{{cli.cli_parroquia}}</div>
                                                                </div>
                                                                <div *ngIf="cli.cli_score">
                                                                    <strong>Score</strong><br>
                                                                    <div class="text-muted">{{cli.cli_score}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-4 invoice-col">
                                                                <div *ngIf="cli.cli_certificado == '1'">
                                                                    <strong>* Solic. Certificado</strong>
                                                                </div>
                                                                <div *ngIf="ListaTrabajos.length > 0">
                                                                    <strong>* Tiene Trabajo</strong>
                                                                </div>

                                                                <div *ngIf="cli.cli_fecha_ultima_gest">
                                                                    <strong>Ultima gestión</strong><br>
                                                                    <div class="text-muted">
                                                                        {{fechas.fechaCortaAbt(cli.cli_fecha_ultima_gest)}}
                                                                    </div>
                                                                </div>
                                                                <div *ngIf="cli.cli_fecha_ultimo_pago">
                                                                    <strong>&Uacute;ltimo pago</strong><br>
                                                                    <div class="text-muted">
                                                                        {{fechas.fechaCortaAbt(cli.cli_fecha_ultimo_pago)}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <hr>
                                                            <div class="col-8">
                                                                <h6>Estado: {{cli.cli_estado_contacta}}</h6>
                                                            </div>
                                                            <div class="col-4">
                                                                <td class="project_progress">
                                                                    <div class="progress progress-sm">
                                                                        <div class="progress-bar bg-green"
                                                                            role="progressbar" aria-valuemin="0"
                                                                            aria-valuemax="100"
                                                                            [style.width.%]="PorcentajeRecuperacion">
                                                                        </div>
                                                                    </div>
                                                                    <small>
                                                                        {{PorcentajeRecuperacion}}% Complete
                                                                    </small>
                                                                </td>
                                                            </div>

                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>





                                    </section>
                                    <!-- informacion del Contactos -->
                                    <section class="col-lg-5 connectedSortable ui-sortable" *ngIf="ListaCorreos!.length > 0
                                    || ListaDirecciones!.length > 0 || ListaGarantes!.length > 0 ||
                                    ListaTelefonos!.length > 0 || ListaTrabajos!.length > 0 ">
                                        <div class="card direct-chat direct-chat-primary">
                                            <div class="card-header card-info card-outline">
                                                <div class="card-tools">
                                                    <button type="button" class="btn btn-tool"
                                                        data-card-widget="collapse">
                                                        <i class="fas fa-minus"></i>
                                                    </button>
                                                </div>
                                                <ul class="nav nav-tabs" id="custom-tabs-three-tab" role="tablist">
                                                    <li class="nav-item" *ngIf="ListaCorreos!.length > 0">
                                                        <a class="nav-link" id="custom-tabs-three-correos-tab"
                                                            data-toggle="pill" href="#custom-tabs-three-correos"
                                                            role="tab" aria-controls="custom-tabs-three-correos"
                                                            aria-selected="false" ngbTooltip="Correos"
                                                            tooltipClass="tooltip-colorido"
                                                            (click)="ListaCorreos!.length > 0?null: BuscarInfAdicional(2)">
                                                            <i class="fa-solid fa-envelopes-bulk"></i>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" *ngIf="ListaDirecciones!.length > 0">
                                                        <a class="nav-link" id="custom-tabs-three-direcciones-tab"
                                                            data-toggle="pill" href="#custom-tabs-three-direcciones"
                                                            role="tab" aria-controls="custom-tabs-three-direcciones"
                                                            aria-selected="false" ngbTooltip="Direcciones"
                                                            tooltipClass="tooltip-colorido"
                                                            (click)="ListaDirecciones!.length > 0?null: BuscarInfAdicional(3)">
                                                            <i class="fa-solid fa-map-location-dot"></i>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" *ngIf="ListaGarantes!.length > 0">
                                                        <a class="nav-link" id="custom-tabs-three-garante-tab"
                                                            data-toggle="pill" href="#custom-tabs-three-garante"
                                                            role="tab" aria-controls="custom-tabs-three-garante"
                                                            aria-selected="true" ngbTooltip="Garante"
                                                            tooltipClass="tooltip-colorido"
                                                            (click)="ListaGarantes!.length > 0?null: BuscarInfAdicional(4)">
                                                            <i class="fa-solid fa-user-group"></i>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" *ngIf="ListaTelefonos!.length > 0">
                                                        <a class="nav-link active" id="custom-tabs-three-telefonos-tab"
                                                            data-toggle="pill" href="#custom-tabs-three-telefonos"
                                                            role="tab" aria-controls="custom-tabs-three-telefonos"
                                                            aria-selected="true" ngbTooltip="Teléfonos"
                                                            tooltipClass="tooltip-colorido"
                                                            (click)="ListaTelefonos!.length > 0?null: BuscarInfAdicional(5)">
                                                            <i class="fa-solid fa-phone-volume"></i>
                                                            <!-- &nbsp;Telefonos -->
                                                        </a>
                                                    </li>
                                                    <li class="nav-item" *ngIf="ListaTrabajos!.length > 0">
                                                        <a class="nav-link" id="custom-tabs-three-trabajos-tab"
                                                            data-toggle="pill" href="#custom-tabs-three-trabajos"
                                                            role="tab" aria-controls="custom-tabs-three-trabajos"
                                                            aria-selected="true" ngbTooltip="Trabajo"
                                                            tooltipClass="tooltip-colorido"
                                                            (click)="ListaTrabajos!.length > 0?null: BuscarInfAdicional(6)">
                                                            <i class="fa-solid fa-briefcase"></i>
                                                        </a>
                                                    </li>
                                                </ul>



                                            </div>


                                            <div class="card-body">
                                                <div class="tab-content" id="custom-tabs-three-tabContent">
                                                    <div class="tab-pane fade" id="custom-tabs-three-correos"
                                                        role="tabpanel" aria-labelledby="custom-tabs-three-correos-tab">
                                                        <div class="table table-sm table-responsive table-hover"
                                                            style="max-height: 160px">
                                                            <div *ngIf="ListaCorreos.length > 0">
                                                                <table class="table-auto small">
                                                                    <small>
                                                                        <thead>
                                                                            <tr style="color: black;">
                                                                                <th style="width: 10px">#</th>
                                                                                <th *ngIf="TipoVistaInfCliente == 0">
                                                                                    Acciones</th>
                                                                                <th>Identificación</th>
                                                                                <th>Email</th>
                                                                                <th>Tipo</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr
                                                                                *ngFor="let datos of ListaCorreos; let i = index">
                                                                                <td *ngIf="TipoVistaInfCliente == 0">
                                                                                    <small>
                                                                                        <button class="btnEditar small"
                                                                                            (click)="CargarElementoAgregarCorreos(datos)">
                                                                                            <i
                                                                                                class="bi bi-pencil-fill"></i>
                                                                                        </button>
                                                                                    </small>
                                                                                    <small>
                                                                                        <button
                                                                                            class="btnEliminar small"
                                                                                            (click)="EliminarElementoCorreos(datos)">
                                                                                            <i class="bi bi-trash"></i>
                                                                                        </button>
                                                                                    </small>
                                                                                </td>
                                                                                <td>{{InicioPaginacion + i +1}}</td>
                                                                                <td>{{datos.cli_identificacion}}</td>
                                                                                <td><small>{{datos.cor_email}}</small>
                                                                                <td><small>{{datos.cor_tipo_correo}}</small>
                                                                                </td>

                                                                            </tr>
                                                                        </tbody>
                                                                    </small>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-three-direcciones"
                                                        role="tabpanel"
                                                        aria-labelledby="custom-tabs-three-direcciones-tab">
                                                        <div class="table table-sm table-responsive table-hover"
                                                            style="max-height: 160px">
                                                            <div *ngIf="ListaDirecciones.length > 0">
                                                                <table class="table-auto small">
                                                                    <small>
                                                                        <thead>
                                                                            <tr style="color: black;">
                                                                                <th style="width: 10px">#
                                                                                </th>
                                                                                <th *ngIf="TipoVistaInfCliente == 0">
                                                                                    Acción</th>
                                                                                <th>Identificación</th>
                                                                                <th>Dirección</th>
                                                                                <th>Tipo</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr
                                                                                *ngFor="let datos of ListaDirecciones; let i = index">
                                                                                <td>{{InicioPaginacion + i +1}}</td>
                                                                                <td *ngIf="TipoVistaInfCliente == 0">
                                                                                    <small>
                                                                                        <button class="btnEditar small"
                                                                                            (click)="CargarElementoAgregarDirecciones(datos)">
                                                                                            <i
                                                                                                class="bi bi-pencil-fill"></i>
                                                                                        </button>
                                                                                    </small>
                                                                                    <small>
                                                                                        <button
                                                                                            class="btnEliminar small"
                                                                                            (click)="EliminarElementoDirecciones(datos)">
                                                                                            <i class="bi bi-trash"></i>
                                                                                        </button>
                                                                                    </small>
                                                                                </td>
                                                                                <td>{{datos.cli_identificacion}}</td>
                                                                                <td><small>{{datos.dir_completa}}</small>
                                                                                <td><small>{{datos.dir_tipo_direccion}}</small>
                                                                                </td>

                                                                            </tr>
                                                                        </tbody>
                                                                    </small>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-three-garante"
                                                        role="tabpanel" aria-labelledby="custom-tabs-three-garante-tab">
                                                        <div class="table table-sm table-responsive table-hover"
                                                            style="max-height: 160px">
                                                            <div *ngIf="ListaGarantes.length > 0">
                                                                <table class="table-auto small">
                                                                    <small>
                                                                        <thead>
                                                                            <tr style="color: black;">
                                                                                <th style="width: 10px">#
                                                                                </th>
                                                                                <th *ngIf="TipoVistaInfCliente == 0">
                                                                                    Acción</th>
                                                                                <th>Identificación</th>
                                                                                <th>Nombres</th>
                                                                                <th>Dir. Domicilio</th>
                                                                                <th>Dir. Trabajo</th>
                                                                                <th>Tel. Domicilio</th>
                                                                                <th>Tel. Trabajo</th>
                                                                                <th>Tel. Adicional</th>
                                                                                <th>Observación</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr
                                                                                *ngFor="let datos of ListaGarantes; let i = index">
                                                                                <td>{{InicioPaginacion + i +1}}</td>
                                                                                <td *ngIf="TipoVistaInfCliente == 0">
                                                                                    <small>
                                                                                        <button class="btnEditar small"
                                                                                            (click)="CargarElementoAgregarGarante(datos)">
                                                                                            <i
                                                                                                class="bi bi-pencil-fill"></i>
                                                                                        </button>
                                                                                    </small>
                                                                                    <small>
                                                                                        <button
                                                                                            class="btnEliminar small"
                                                                                            (click)="EliminarElementoGarantes(datos)">
                                                                                            <i class="bi bi-trash"></i>
                                                                                        </button>
                                                                                    </small>
                                                                                </td>
                                                                                <td>{{datos.gar_identificacion}}</td>
                                                                                <td><small>{{datos.gar_nombres}}</small>
                                                                                <td><small>{{datos.gar_direccion_dom}}</small>
                                                                                <td><small>{{datos.gar_direccion_trabajo}}</small>
                                                                                <td><small>{{datos.gar_telefono_domicilio}}</small>
                                                                                <td><small>{{datos.gar_telefono_trabajo}}</small>
                                                                                <td><small>{{datos.gar_telefono_adicional}}</small>
                                                                                <td><small>{{datos.gar_observacion}}</small>
                                                                                </td>

                                                                            </tr>
                                                                        </tbody>
                                                                    </small>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade active show"
                                                        id="custom-tabs-three-telefonos" role="tabpanel"
                                                        aria-labelledby="custom-tabs-three-telefonos-tab">
                                                        <div class="table table-sm table-responsive table-hover"
                                                            style="max-height: 160px" *ngIf="ListaTelefonos.length > 0">
                                                            <table class="table-auto small">
                                                                <small>
                                                                    <thead>
                                                                        <tr style="color: black;">
                                                                            <th style="width: 10px">#
                                                                            </th>
                                                                            <th *ngIf="TipoVistaInfCliente == 0">
                                                                                Acciones</th>
                                                                            <th>Tipo</th>
                                                                            <th>Número</th>
                                                                            <th>Detalle</th>
                                                                            <th>Cambio Detalle</th>
                                                                            <th></th>
                                                                            <th>Observación</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr
                                                                            *ngFor="let datos of ListaTelefonos; let i = index">
                                                                            <td>{{InicioPaginacion + i + 1}}</td>
                                                                            <td *ngIf="TipoVistaInfCliente == 0">
                                                                                <small>
                                                                                    <button class="btnEditar small"
                                                                                        (click)="CargarElementoAgregarTelefonos(datos)">
                                                                                        <i
                                                                                            class="bi bi-pencil-fill"></i>
                                                                                    </button>
                                                                                </small>
                                                                                <small>
                                                                                    <button class="btnEliminar small"
                                                                                        (click)="EliminarElementoTelefonos(datos)">
                                                                                        <i class="bi bi-trash"></i>
                                                                                    </button>
                                                                                </small>
                                                                            </td>
                                                                            <td><small>{{datos.tel_tipo_telefono}}</small>
                                                                            </td>
                                                                            <td>{{datos.tel_numero}}</td>
                                                                            <td>{{datos.tel_detal_telefono}}</td>
                                                                            <td>{{datos.tel_id_detal_telefono}}</td>
                                                                            <td>{{datos.tel_tipo_operadora}}</td>
                                                                            <td>{{datos.tel_observacion}}</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </small>
                                                            </table>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-three-trabajos"
                                                        role="tabpanel"
                                                        aria-labelledby="custom-tabs-three-trabajos-tab">
                                                        <div class="table table-sm table-responsive table-hover"
                                                            style="max-height: 160px">
                                                            <div *ngIf="ListaTrabajos.length > 0">
                                                                <table class="table-auto small">
                                                                    <small>
                                                                        <thead>
                                                                            <tr style="color: black;">
                                                                                <th style="width: 10px">#
                                                                                </th>
                                                                                <th *ngIf="TipoVistaInfCliente == 0">
                                                                                    Acción</th>
                                                                                <th>Ruc</th>
                                                                                <th>Descripción</th>
                                                                                <th>Dirección</th>
                                                                                <th>Teléfono</th>
                                                                                <th>Correo</th>
                                                                                <th>Observación</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr
                                                                                *ngFor="let datos of ListaTrabajos; let i = index">
                                                                                <td>{{InicioPaginacion + i +1}}</td>
                                                                                <td *ngIf="TipoVistaInfCliente == 0">
                                                                                    <small>
                                                                                        <button class="btnEditar small"
                                                                                            (click)="CargarElementoAgregarTrabajos(datos)">
                                                                                            <i
                                                                                                class="bi bi-pencil-fill"></i>
                                                                                        </button>
                                                                                    </small>
                                                                                    <small>
                                                                                        <button
                                                                                            class="btnEliminar small"
                                                                                            (click)="EliminarElementoTrabajos(datos)">
                                                                                            <i class="bi bi-trash"></i>
                                                                                        </button>
                                                                                    </small>
                                                                                </td>
                                                                                <td>{{datos.tra_ruc}}</td>
                                                                                <td><small>{{datos.tra_descripcion}}</small>
                                                                                </td>
                                                                                <td><small>{{datos.tra_direccion}}</small>
                                                                                </td>
                                                                                <td><small>{{datos.tra_telefono}}</small>
                                                                                </td>
                                                                                <td><small>{{datos.tra_correo}}</small>
                                                                                </td>
                                                                                <td><small>{{datos.tra_observacion}}</small>
                                                                                </td>

                                                                            </tr>
                                                                        </tbody>
                                                                    </small>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>



                                        </div>
                                    </section>
                                </section>
                                <!-- BOTONES DE ACCIONES -->
                                <section class="row" *ngIf="ListaPagosCount > 0">
                                    <div class="col-lg-12">
                                        <div class="row">
                                            <div class="col-lg-8">
                                                <div class="form-group">
                                                    <a class="btn btn-sm btn-info ml-2 mb-2"
                                                        (click)="AbrirModalAgregarCorreos(0)"
                                                        ngbTooltip="Agregar Correos">
                                                        <i class="fa-solid fa-plus"></i>
                                                        <span>&nbsp;Correo&nbsp;</span>
                                                        <i class="fa-solid fa-envelopes-bulk"></i>
                                                    </a>
                                                    <a class="btn btn-sm btn-info ml-2 mb-2"
                                                        (click)="AbrirModalAgregarDirecciones(0)"
                                                        ngbTooltip="Agregar Dirección">
                                                        <i class="fa-solid fa-plus"></i>
                                                        <span>&nbsp;Dirección&nbsp;</span>
                                                        <i class="fa-solid fa-map-location-dot"></i>
                                                    </a>
                                                    <a class="btn btn-sm btn-info ml-2 mb-2"
                                                        (click)="AbrirModalAgregarGarante(0)"
                                                        ngbTooltip="Agregar Garante">
                                                        <i class="fa-solid fa-plus"></i>
                                                        <span>&nbsp;Garante&nbsp;</span>
                                                        <i class="fa-solid fa-user-group"></i>
                                                    </a>
                                                    <a class="btn btn-sm btn-info ml-2 mb-2"
                                                        (click)="AbrirModalAgregarTelefono(0)"
                                                        ngbTooltip="Agregar Teléfono">
                                                        <i class="fa-solid fa-plus"></i>
                                                        <span>&nbsp;Teléfono&nbsp;</span>
                                                        <i class="fa-solid fa-phone-volume"></i>
                                                    </a>
                                                    <a class="btn btn-sm btn-info ml-2 mb-2"
                                                        (click)="AbrirModalAgregarTrabajos(0)"
                                                        ngbTooltip="Agregar Trabajo">
                                                        <i class="fa-solid fa-plus"></i>
                                                        <span>&nbsp;Trabajo&nbsp;</span>
                                                        <i class="fa-solid fa-briefcase"></i>
                                                    </a>
                                                </div>


                                            </div>
                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <a class="btn btn-sm btn-info ml-2 mb-2" ngbTooltip="Familiares"
                                                        (click)="AbrirModalFamiliares()">
                                                        <i class="fa-solid fa-people-roof"></i>
                                                        <span>&nbsp;Familiares&nbsp;</span>
                                                    </a>
                                                    <a class="btn btn-sm btn-info ml-2 mb-2"
                                                        ngbTooltip="Gestiones Realizadas"
                                                        (click)="AbrirModalGestionesAnteriores()">
                                                        <i class="fa-solid fa-clock-rotate-left"></i>
                                                        <span>&nbsp;Gestiones
                                                            Realizadas&nbsp;</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <!-- INFORMACION DEL CREDITO Y TABLA DE PAGOS CON OPCION A LOS BOTONES DE ACCESO -->
                                <section class="row">
                                    <!-- informacion del credito -->
                                    <section class="col-lg-9 connectedSortable ui-sortable"
                                        *ngIf="ProductoSeleccionado">
                                        <div class="card direct-chat" *ngIf="ProductoSeleccionado as p">
                                            <div class="card-header card-info card-outline">
                                                <div class="card-tools">
                                                    <button type="button" class="btn btn-tool"
                                                        data-card-widget="collapse">
                                                        <i class="fas fa-minus"></i>
                                                    </button>
                                                </div>
                                                <div class="row">
                                                    <div class="col-11">
                                                        <div class="btn-group" role="group" aria-label="Basic example">
                                                            <span>Productos&nbsp;</span>
                                                            <span class="right badge badge-info"
                                                                *ngIf="ListaProductosCount > 1">{{ListaProductosCount}}</span>&nbsp;

                                                        </div>
                                                        <div class="btn-group" role="group" aria-label="Basic example">
                                                            <select style="height: 35px;" class="form-select"
                                                                (change)="SeleccionarProducto($event,0)">
                                                                <option *ngFor="let s of ListaProductos"
                                                                    [value]="s.ope_producto">
                                                                    {{s.ope_cod_credito +': '+ s.ope_producto}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <div class="btn-group ml-2" role="group"
                                                            *ngIf="ListaProductosCount > 1" aria-label="Basic example">
                                                            <div class="custom-control custom-checkbox">
                                                                <input class="custom-control-input" type="checkbox"
                                                                    [formControl]="chkTodosProductos"
                                                                    (change)="ListarProductosGestionTodos()"
                                                                    id="chkTodosProductos" value="0">
                                                                <label class="truncate-text" for="chkTodosProductos"
                                                                    class="custom-control-label">Todos</label>
                                                            </div>
                                                        </div>

                                                    </div>

                                                </div>


                                            </div>
                                            <div class="card-body small" *ngIf="!chkTodosProductos.value">
                                                <div class="row">
                                                    <div class="col-md-3">

                                                        <div class="">
                                                            <div class="box-profile">
                                                                <h5 class="text-center">
                                                                    <strong class="small">{{p.cartera}}</strong>
                                                                </h5>
                                                                <p class="text-center">
                                                                    Producto:&nbsp;<strong>{{p.ope_producto}}</strong>
                                                                </p>
                                                            </div>

                                                        </div>


                                                    </div>

                                                    <div class="col-md-9">
                                                        <div class="row invoice-info ml-1 mr-1">
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Días Mora</strong><br>
                                                                    <div class="text-muted">{{p.ope_dias_mora}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Int. Mora</strong><br>
                                                                    <div class="text-muted">{{p.ope_interes_mora}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Int. Corriente</strong><br>
                                                                    <div class="text-muted">{{p.ope_saldo_interes}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Gto. Cobranza</strong><br>
                                                                    <div class="text-muted">{{p.ope_gastos_cobranzas}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row invoice-info ml-1 mr-1">
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Saldo CXC</strong><br>
                                                                    <div class="text-muted">{{p.ope_saldo_cxc_actual}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Liquidar</strong><br>
                                                                    <div class="text-muted">{{p.ope_liquidar}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Originación</strong><br>
                                                                    <div class="text-muted">{{p.ope_saldo_interes}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Nº Reestruct</strong><br>
                                                                    <div class="text-muted">{{p.ope_gastos_cobranzas}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <div class="row invoice-info  ml-1 mr-1">
                                                            <div class="col-sm-2 invoice-col">
                                                                <div>
                                                                    <strong>cod CXC</strong><br>
                                                                    <div class="text-muted">{{p.ope_cod_credito}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Línea</strong><br>
                                                                    <div class="text-muted">{{p.ope_linea}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-4 invoice-col">
                                                                <div>
                                                                    <strong>Descripción Unidad Gestión</strong><br>
                                                                    <div class="text-muted">
                                                                        {{p.ope_descrip_unidad_gestion}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-3 invoice-col">
                                                                <div>
                                                                    <strong>Estado Contactabilidad</strong><br>
                                                                    <div class="text-muted">
                                                                        {{p.ope_estado_contacta}}</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row invoice-info  ml-1 mr-1">
                                                            <div class="col-sm-2 invoice-col">
                                                                <div>
                                                                    <strong>Última Act</strong><br>
                                                                    <div class="text-muted">
                                                                        {{p.ope_fecha_up == null ?
                                                                        '':fechas.fechaCortaAbt(p.ope_fecha_up)}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-2 invoice-col">
                                                                <div>
                                                                    <strong>Último Pago</strong><br>
                                                                    <div class="text-muted">
                                                                        {{p.ope_fecha_pagada == null ?
                                                                        '':fechas.fechaCortaAbt(p.ope_fecha_pagada)}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-2 invoice-col">
                                                                <div>
                                                                    <strong>F.Incumplim</strong><br>
                                                                    <div class="text-muted">
                                                                        {{p.ope_fecha_up == null ?
                                                                        '':fechas.fechaCortaAbt(p.ope_fecha_up)}}</div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-2 invoice-col">
                                                                <div>
                                                                    <strong>F.Castigo</strong><br>
                                                                    <div class="text-muted">
                                                                        {{p.ope_fecha_venc == null ?
                                                                        '':fechas.fechaCortaAbt(p.ope_fecha_venc)}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-2 invoice-col">
                                                                <div>
                                                                    <strong>Fecha Compra</strong><br>
                                                                    <div class="text-muted">
                                                                        {{p.ope_fecha_entrega == null ?
                                                                        '':fechas.fechaCortaAbt(p.ope_fecha_entrega)}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-2 invoice-col">
                                                                <div>
                                                                    <strong>Últ. Pago</strong><br>
                                                                    <div class="text-muted">
                                                                        {{p.ope_fecha_compra == null ?
                                                                        '':fechas.fechaCortaAbt(p.ope_fecha_compra)}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-body small" *ngIf="chkTodosProductos.value">
                                                <div class="table table-sm table-responsive table-hover"
                                                    style="max-height: 160px">
                                                    <div *ngIf="ListaProductosCount > 0; else loadingOrError1">
                                                        <table class="table-auto small">
                                                            <small>
                                                                <thead>
                                                                    <tr style="color: black;">
                                                                        <th style="width: 10px">#</th>
                                                                        <th>Cod Cxc</th>
                                                                        <th>Producto</th>
                                                                        <th>Linea</th>
                                                                        <th>D. mora</th>
                                                                        <th>Int. mora</th>
                                                                        <th>Interés</th>
                                                                        <th>Gts. cobranza</th>
                                                                        <th>Saldo Act.</th>
                                                                        <th>F. compra</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr
                                                                        *ngFor="let datos of ListaProductos; let i = index">

                                                                        <td>{{InicioPaginacion + i +1}}</td>
                                                                        <td>{{datos.ope_cod_credito}}</td>
                                                                        <td><small>{{datos.ope_producto}}</small>
                                                                        <td><small>{{datos.ope_linea}}</small>
                                                                        <td><small>{{datos.ope_dias_mora}}</small>
                                                                        <td><small>{{datos.ope_interes_mora}}</small>
                                                                        <td><small>{{datos.ope_saldo_interes}}</small>
                                                                        <td><small>{{datos.ope_gastos_cobranzas}}</small>
                                                                        <td><small>{{datos.ope_saldo_cxc_actual}}</small>
                                                                        <td><small>{{datos.ope_fecha_compra}}</small>
                                                                        </td>

                                                                    </tr>
                                                                </tbody>
                                                            </small>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>





                                            <div class="card-footer" style="max-height: 50px;">
                                                <div class="row">
                                                    <div class="form-group">
                                                        <a class="btn btn-sm btn-info"
                                                            (click)="AbrirModalActualizaciones()">
                                                            <i class="fa-solid fa-arrows-rotate"></i>
                                                            <span>&nbsp;Actualizaciones&nbsp;</span>
                                                        </a>
                                                        <a class="btn btn-sm btn-info ml-2"
                                                            (click)="AbrirModalValorOriginal()">
                                                            <i class="fa-solid fa-lock"></i>
                                                            <span>&nbsp;Valor Original&nbsp;</span>
                                                        </a>


                                                        <a class="btn btn-sm btn-info float-right"
                                                            *ngIf="TipoVistaInfCliente == 0"
                                                            (click)="AbrirModalAgregarPagos(1)">
                                                            <i class="fa-solid fa-sack-dollar"></i>
                                                            <span>&nbsp;Agregar Pago&nbsp;</span>
                                                        </a>
                                                        <a class="btn btn-sm btn-info float-right mr-2"
                                                            (click)="AbrirModalDocumentos()">
                                                            <i class="fa-regular fa-folder-open"></i>
                                                            <span>&nbsp;Documentos&nbsp;</span>
                                                        </a>
                                                    </div>

                                                </div>


                                            </div>

                                        </div>
                                    </section>
                                    <!-- Botones de acceso y tabla pagos -->
                                    <section class="col-lg-3 connectedSortable ui-sortable"
                                        *ngIf="ProductoSeleccionado">
                                        <!-- Botones de acceso -->
                                        <div class="row" *ngIf="ListaPagosCount == 0">
                                            <div class="col-12">
                                                <div class="card direct-chat">
                                                    <div class="card-header card-info card-outline">
                                                        <div class="card-tools">
                                                            <button type="button" class="btn btn-tool"
                                                                data-card-widget="collapse">
                                                                <i class="fas fa-minus"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="row mt-2">
                                                            <div class="form-group">
                                                                <a class="btn btn-sm btn-info ml-2 mb-2"
                                                                    (click)="AbrirModalAgregarCorreos(0)"
                                                                    ngbTooltip="Agregar Correos">
                                                                    <i class="fa-solid fa-plus"></i>
                                                                    <span>&nbsp;Correo&nbsp;</span>
                                                                    <i class="fa-solid fa-envelopes-bulk"></i>
                                                                </a>
                                                                <a class="btn btn-sm btn-info ml-2 mb-2"
                                                                    (click)="AbrirModalAgregarDirecciones(0)"
                                                                    ngbTooltip="Agregar Dirección">
                                                                    <i class="fa-solid fa-plus"></i>
                                                                    <span>&nbsp;Dirección&nbsp;</span>
                                                                    <i class="fa-solid fa-map-location-dot"></i>
                                                                </a>
                                                                <a class="btn btn-sm btn-info ml-2 mb-2"
                                                                    (click)="AbrirModalAgregarGarante(0)"
                                                                    ngbTooltip="Agregar Garante">
                                                                    <i class="fa-solid fa-plus"></i>
                                                                    <span>&nbsp;Garante&nbsp;</span>
                                                                    <i class="fa-solid fa-user-group"></i>
                                                                </a>
                                                                <a class="btn btn-sm btn-info ml-2 mb-2"
                                                                    (click)="AbrirModalAgregarTelefono(0)"
                                                                    ngbTooltip="Agregar Teléfono">
                                                                    <i class="fa-solid fa-plus"></i>
                                                                    <span>&nbsp;Teléfono&nbsp;</span>
                                                                    <i class="fa-solid fa-phone-volume"></i>
                                                                </a>
                                                                <a class="btn btn-sm btn-info ml-2 mb-2"
                                                                    (click)="AbrirModalAgregarTrabajos(0)"
                                                                    ngbTooltip="Agregar Trabajo">
                                                                    <i class="fa-solid fa-plus"></i>
                                                                    <span>&nbsp;Trabajo&nbsp;</span>
                                                                    <i class="fa-solid fa-briefcase"></i>
                                                                </a>
                                                            </div>
                                                            <div class="form-group">
                                                                <a class="btn btn-sm btn-info ml-2 mb-2"
                                                                    (click)="AbrirModalFamiliares()"
                                                                    ngbTooltip="Familiares">
                                                                    <i class="fa-solid fa-people-roof"></i>
                                                                    <span>&nbsp;Familiares&nbsp;</span>
                                                                </a>
                                                                <a class="btn btn-sm btn-info ml-2 mb-2"
                                                                    ngbTooltip="Gestiones Realizadas"
                                                                    (click)="AbrirModalGestionesAnteriores()">
                                                                    <i class="fa-solid fa-clock-rotate-left"></i>
                                                                    <span>&nbsp;Gestiones
                                                                        Realizadas&nbsp;</span>
                                                                </a>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- tabla pagos -->
                                        <div class="row" *ngIf="ListaPagosCount > 0">
                                            <div class="col-12">
                                                <div class="card direct-chat">
                                                    <div class="card-header card-info card-outline">
                                                        <h3 class="card-title">Pagos</h3>
                                                        <div class="card-tools">
                                                            <button type="button" class="btn btn-tool"
                                                                data-card-widget="collapse">
                                                                <i class="fas fa-minus"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="table-wrapper">
                                                            <div class="small">
                                                                <table
                                                                    class="table table-bordered table-responsive   table-auto small"
                                                                    *ngIf="ListaPagos.length != 0">
                                                                    <div class="table table-sm table-responsive table-hover"
                                                                        style="max-height: 160px">

                                                                        <thead>
                                                                            <tr>
                                                                                <th style="width: 10px">#</th>
                                                                                <th class="OcultarMax450px">Mes</th>
                                                                                <th class="OcultarMax450px">Pago
                                                                                </th>
                                                                                <th class="OcultarMax450px">Fecha
                                                                                    pago
                                                                                </th>
                                                                                <th class="OcultarMax450px">Cuenta
                                                                                </th>
                                                                                <th>Acciones</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody class="small">
                                                                            <tr
                                                                                *ngFor="let datos of ListaPagos; let i = index">
                                                                                <th
                                                                                    class="{{datos.Pagos.pag_pago_verificado==1?'verificado':''}}">
                                                                                    {{InicioPaginacion
                                                                                    + i + 1}}</th>
                                                                                <th
                                                                                    class="{{datos.Pagos.pag_pago_verificado==1?'verificado':''}}">
                                                                                    {{datos.Pagos.pag_mes_pago}}
                                                                                </th>
                                                                                <th
                                                                                    class="{{datos.Pagos.pag_pago_verificado==1?'verificado':''}}">
                                                                                    {{datos.Pagos.pag_pago}}</th>
                                                                                <th
                                                                                    class="{{datos.Pagos.pag_pago_verificado==1?'verificado':''}}">
                                                                                    {{fechas.fechaCortaAbt(datos.Pagos.pag_fecha_pago)}}
                                                                                </th>
                                                                                <th
                                                                                    class="{{datos.Pagos.pag_pago_verificado==1?'verificado':''}}">
                                                                                    {{datos.Pagos.Cuenta.cuent_nombre}}
                                                                                </th>
                                                                                <th
                                                                                    class="{{datos.Pagos.pag_pago_verificado==1?'verificado':''}}">
                                                                                    <div class="btn-group" role="group">

                                                                                        <button class="btnVer"
                                                                                            (click)="VerElemento(datos)">
                                                                                            <i
                                                                                                class="fa-regular fa-eye"></i></button>


                                                                                        <button class="ml-2 btnEditar"
                                                                                            *ngIf="datos.Pagos.pag_pago_verificado!=1"
                                                                                            (click)="CargarElementoPagos(datos,3)">
                                                                                            <i
                                                                                                class="bi bi-pencil-fill"></i></button>

                                                                                    </div>
                                                                                </th>

                                                                            </tr>
                                                                        </tbody>
                                                                    </div>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card-footer small">
                                                        <div class="row small">
                                                            <div class="col">
                                                                <p>Total<strong>&nbsp;{{PagosTotal}}</strong></p>
                                                            </div>
                                                            <div class="col">
                                                                <div>
                                                                    <p>Verificados<strong>&nbsp;{{PagosVerificados}}</strong>
                                                                    </p>
                                                                </div>

                                                            </div>
                                                            <div class="col">
                                                                <div>
                                                                    <p>Sin
                                                                        verificar<strong>&nbsp;{{PagosSinVerificados}}</strong>
                                                                    </p>
                                                                </div>

                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                </section>


                            </div>
                        </section>
                        <!-- FORMULARIO DE GESTION -->
                        <div *ngIf="ProductoSeleccionado as p">
                            <section *ngIf="TipoVistaInfCliente == 0 && p.ope_liquidado != 1" class="content mt-2">
                                <div class="container-fluid">
                                    <section class="row">
                                        <div class="col-lg-12 connectedSortable ui-sortable">
                                            <div class="card direct-chat">
                                                <div class="card-header card-info card-outline">
                                                    <h3 class="card-title">Gestión</h3>
                                                    <div class="card-tools">
                                                        <button type="button" class="btn btn-tool"
                                                            data-card-widget="collapse">
                                                            <i class="fas fa-minus"></i>
                                                        </button>
                                                    </div>
                                                </div>

                                                <div class="card-body small">
                                                    <form [formGroup]="GestionForms">
                                                        <div class="row">
                                                            <div class="col-md-3">
                                                                <div class="box-profile">
                                                                    <h5 class="text-center">Gestor:&nbsp;
                                                                        <strong class="small">{{Usuario.ges_nombres+'
                                                                            '+Usuario.ges_apellidos}}</strong>
                                                                    </h5>
                                                                    <div class="project_progress text-center">
                                                                        <div class="progress progress-sm">
                                                                            <div class="progress-bar bg-green"
                                                                                role="progressbar" aria-valuemin="0"
                                                                                aria-valuemax="100"
                                                                                [style.width.%]="PorcentajeRecuperacion">
                                                                            </div>
                                                                        </div>
                                                                        <small>
                                                                            Valor deuda: {{p.ope_saldo_cxc_actual}} -/-
                                                                            Valor actual:
                                                                            {{PagosTotal}}
                                                                        </small>
                                                                    </div>
                                                                </div>


                                                            </div>
                                                            <div class="col-md-2">
                                                                <div class="form-group">
                                                                    <span title="Cantidad de meses sin gestión">Tipo de
                                                                        Gestión</span>

                                                                    <select style="height: 35px;" class="form-select"
                                                                        (click)="ListaTipoGestion.length > 0?null:ListarTG_Cone_Contac(0)"
                                                                        (ngModelChange)="GestionForms.get('gest_id_tipo_gestion')!.value! == 0?null:ListarTG_Cone_Contac(1);ListarcontactoPorTipoSeleccion()"
                                                                        formControlName="gest_id_tipo_gestion">
                                                                        <option value="0" disabled selected>
                                                                            Seleccione ...
                                                                        </option>
                                                                        <option *ngIf="ListaTipoGestion.length == 0"
                                                                            disabled>
                                                                            Cargando ...
                                                                        </option>
                                                                        <option *ngFor="let s of ListaTipoGestion"
                                                                            [value]="s.id_tipo_gestion">
                                                                            {{s.gestion_tip_descripcion}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2">
                                                                <div class="form-group">
                                                                    <span
                                                                        title="Cantidad de meses sin gestión">Conectividad</span>

                                                                    <select style="height: 35px;" class="form-select"
                                                                        (ngModelChange)="GestionForms.get('gest_id_conectividad')!.value! == 0?null:ListarTG_Cone_Contac(2)"
                                                                        formControlName="gest_id_conectividad">
                                                                        <option value="0" disabled selected>
                                                                            Seleccione ...
                                                                        </option>
                                                                        <option *ngIf="ListaConectividad.length == 0"
                                                                            disabled>
                                                                            Cargando
                                                                            ...
                                                                        </option>
                                                                        <option *ngFor="let s of ListaConectividad"
                                                                            [value]="s.id_conectividad">
                                                                            {{s.conec_descripcion}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <span
                                                                        title="Cantidad de meses sin gestión">Contactabilidad</span>

                                                                    <select style="height: 35px;" class="form-select"
                                                                        (ngModelChange)="MostrarCamposGestionar();ResetGestionFormsEspecificos()"
                                                                        formControlName="gest_id_contactabilidad">
                                                                        <option value="0" disabled selected>
                                                                            Seleccione ...
                                                                        </option>
                                                                        <option
                                                                            *ngIf="ListaContactabilidadGestion.length == 0"
                                                                            disabled>
                                                                            Cargando ...
                                                                        </option>
                                                                        <option
                                                                            *ngFor="let s of ListaContactabilidadGestion"
                                                                            [value]="s.id_contactabilidad">
                                                                            {{s.contac_descripcion}}
                                                                        </option>
                                                                    </select>

                                                                </div>
                                                            </div>
                                                            <div class="col-md-2" *ngIf="ListaContactoPorTipoCount > 0">
                                                                <div class="form-group">
                                                                    <span title="Cantidad de meses sin gestión">Contacto
                                                                        por</span>
                                                                    <select style="height: 35px;" class="form-select"
                                                                        (ngModelChange)="ValorDelContactar()"
                                                                        formControlName="gest_id_contacto">
                                                                        <option value="0" disabled selected>
                                                                            Seleccione ...
                                                                        </option>
                                                                        <option *ngFor="let s of ListaContactoPorTipo"
                                                                            [value]="s.id">
                                                                            {{s.descripcion}}
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-2 col-md-3 col-sm-3 col-6"
                                                                *ngIf="CamposVisuales.value == 1 || CamposVisuales.value == 3">
                                                                <div class="form-floating mb-2">
                                                                    <input type="date" class="form-control"
                                                                        formControlName="gest_fecha_compromiso"
                                                                        id="gest_fecha_compromiso" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_fecha_compromiso">F.
                                                                        Compromiso</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-2 col-md-3 col-sm-3 col-6"
                                                                *ngIf="CamposVisuales.value == 2">
                                                                <div class="form-floating mb-2">
                                                                    <input type="date" class="form-control"
                                                                        formControlName="gest_fecha_incumplido"
                                                                        id="gest_fecha_incumplido" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_fecha_incumplido">F.
                                                                        Incumplido</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-10 col-md-9 col-sm-9 col-12">
                                                                <div class="form-floating mb-2">
                                                                    <textarea type="text" class="form-control"
                                                                        formControlName="gest_descripcion"
                                                                        id="gest_descripcion" placeholder=""></textarea>
                                                                    <label class="truncate-text"
                                                                        for="gest_descripcion">Detalle de
                                                                        Gestión</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 2">
                                                                <div class="form-floating mb-2">
                                                                    <input type="text" class="form-control"
                                                                        formControlName="gest_valor_incumplido"
                                                                        id="gest_valor_incumplido" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_valor_incumplido">Valor
                                                                        Incumplido</label>
                                                                    <Section>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_valor_incumplido')?.hasError('required') 
                                                                    && GestionForms.get('gest_valor_incumplido')?.touched">
                                                                            <span style="color: brown;">*Este campo es
                                                                                obligatorio.</span>
                                                                        </div>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_valor_incumplido')?.value != ''
                                                                    ? validar.V_NumerosDesimales(GestionForms.get('gest_valor_incumplido')?.value!)  === false:null ">
                                                                            <span style="color: brown;">*contiene
                                                                                caracteres
                                                                                no permitidos en este campo.</span>
                                                                        </div>
                                                                    </Section>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 1 || CamposVisuales.value == 3">
                                                                <div class="form-floating mb-2">
                                                                    <input type="text" class="form-control"
                                                                        formControlName="gest_valor_comp"
                                                                        id="gest_valor_comp" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_valor_comp">Valor
                                                                        Compromiso</label>
                                                                    <Section>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_valor_comp')?.hasError('required') 
                                                                        && GestionForms.get('gest_valor_comp')?.touched">
                                                                            <span style="color: brown;">*Este campo es
                                                                                obligatorio.</span>
                                                                        </div>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_valor_comp')?.value != ''
                                                                        ? validar.V_NumerosDesimales(GestionForms.get('gest_valor_comp')?.value!)  === false:null ">
                                                                            <span style="color: brown;">*contiene
                                                                                caracteres
                                                                                no permitidos en este campo.</span>
                                                                        </div>
                                                                    </Section>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 1 || CamposVisuales.value == 3">
                                                                <div class="form-floating mb-2">
                                                                    <input type="text" class="form-control"
                                                                        formControlName="gest_abonos" id="gest_abonos"
                                                                        placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_abonos">Abono</label>
                                                                    <Section>
                                                                        <div class="error-message" *ngIf="GestionForms.get('gest_abonos')?.hasError('required') 
                                                                        && GestionForms.get('gest_abonos')?.touched">
                                                                            <span style="color: brown;">*Este campo es
                                                                                obligatorio.</span>
                                                                        </div>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_abonos')?.value != ''
                                                                        ? validar.V_NumerosDesimales(GestionForms.get('gest_abonos')?.value!)  === false:null ">
                                                                            <span style="color: brown;">*contiene
                                                                                caracteres
                                                                                no permitidos en este campo.</span>
                                                                        </div>
                                                                    </Section>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 1 || CamposVisuales.value == 3">
                                                                <div class="form-floating mb-2">
                                                                    <input type="text" class="form-control"
                                                                        formControlName="gest_num_coutas"
                                                                        id="gest_num_coutas" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_num_coutas">N°
                                                                        Cuotas</label>
                                                                    <Section>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_num_coutas')?.hasError('required') 
                                                                        && GestionForms.get('gest_num_coutas')?.touched">
                                                                            <span style="color: brown;">*Este campo es
                                                                                obligatorio.</span>
                                                                        </div>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_num_coutas')?.value != ''
                                                                        ? validar.V_SoloNumeros(GestionForms.get('gest_num_coutas')?.value!)  === false:null ">
                                                                            <span style="color: brown;">*contiene
                                                                                caracteres
                                                                                no permitidos en este campo.</span>
                                                                        </div>
                                                                    </Section>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 1 || CamposVisuales.value == 3">
                                                                <div class="form-floating mb-2">
                                                                    <input type="text" class="form-control"
                                                                        formControlName="gest_num_coutas_res"
                                                                        id="gest_num_coutas_res" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_num_coutas_res">N° C.
                                                                        Restantes</label>
                                                                    <Section>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_num_coutas_res')?.hasError('required') 
                                                                        && GestionForms.get('gest_num_coutas_res')?.touched">
                                                                            <span style="color: brown;">*Este campo es
                                                                                obligatorio.</span>
                                                                        </div>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_num_coutas_res')?.value != ''
                                                                        ? validar.V_SoloNumeros(GestionForms.get('gest_num_coutas_res')?.value!)  === false:null ">
                                                                            <span style="color: brown;">*contiene
                                                                                caracteres
                                                                                no permitidos en este campo.</span>
                                                                        </div>
                                                                    </Section>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 1 || CamposVisuales.value == 3">
                                                                <div class="form-floating mb-2">
                                                                    <input type="text" class="form-control"
                                                                        formControlName="gest_couta" id="gest_couta"
                                                                        placeholder="">
                                                                    <label class="truncate-text small"
                                                                        for="gest_couta">Cuota</label>
                                                                    <Section>
                                                                        <div class="error-message" *ngIf="GestionForms.get('gest_couta')?.hasError('required') 
                                                                        && GestionForms.get('gest_couta')?.touched">
                                                                            <span style="color: brown;">*Este campo es
                                                                                obligatorio.</span>
                                                                        </div>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_couta')?.value != ''
                                                                        ? validar.V_NumerosDesimales(GestionForms.get('gest_couta')?.value!)  === false:null ">
                                                                            <span style="color: brown;">*contiene
                                                                                caracteres
                                                                                no permitidos en este campo.</span>
                                                                        </div>
                                                                    </Section>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 1 || CamposVisuales.value == 3">
                                                                <div class="form-floating mb-2">
                                                                    <input type="text" class="form-control"
                                                                        formControlName="gest_valor_a_cobrar"
                                                                        id="gest_valor_a_cobrar" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_valor_a_cobrar">Total Mes</label>
                                                                    <Section>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_valor_a_cobrar')?.hasError('required') 
                                                                        && GestionForms.get('gest_valor_a_cobrar')?.touched">
                                                                            <span style="color: brown;">*Este campo es
                                                                                obligatorio.</span>
                                                                        </div>
                                                                        <div class="error-message"
                                                                            *ngIf="GestionForms.get('gest_valor_a_cobrar')?.value != ''
                                                                        ? validar.V_NumerosDesimales(GestionForms.get('gest_valor_a_cobrar')?.value!)  === false:null ">
                                                                            <span style="color: brown;">*contiene
                                                                                caracteres
                                                                                no permitidos en este campo.</span>
                                                                        </div>
                                                                    </Section>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 1">
                                                                <div class="form-floating mb-2">
                                                                    <input type="date" class="form-control"
                                                                        formControlName="gest_fecha_prox_pago"
                                                                        id="gest_fecha_prox_pago" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_fecha_prox_pago">F.proximo pag</label>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-2 col-sm-6">
                                                                <div class="btn-group ml-2" role="group"
                                                                    aria-label="Basic example">
                                                                    <div class="custom-control custom-checkbox">
                                                                        <input class="custom-control-input"
                                                                            (ngModelChange)="VolverLlamarCheck()"
                                                                            type="checkbox"
                                                                            formControlName="gest_volver_llamar"
                                                                            id="chkVolverLlamar" value="0">
                                                                        <label class="truncate-text"
                                                                            for="chkVolverLlamar"
                                                                            class="custom-control-label">Volver a
                                                                            llamar</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="GestionForms.get('gest_volver_llamar')!.value">
                                                                <div class="form-floating mb-2">
                                                                    <input type="date" class="form-control"
                                                                        formControlName="gest_fecha_volver_llamar"
                                                                        id="gest_fecha_volver_llamar" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_fecha_volver_llamar">F.Volver a
                                                                        llamar</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="GestionForms.get('gest_volver_llamar')!.value">
                                                                <div class="form-floating mb-2">
                                                                    <input type="time" class="form-control"
                                                                        formControlName="gest_hora_volver_llamar"
                                                                        id="gest_hora_volver_llamar" placeholder="">
                                                                    <label class="truncate-text"
                                                                        for="gest_hora_volver_llamar">H.Volver a
                                                                        llamar</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6"
                                                                *ngIf="CamposVisuales.value == 1 || CamposVisuales.value == 3">
                                                                <div class="btn-group ml-2" role="group"
                                                                    aria-label="Basic example">
                                                                    <div class="custom-control custom-checkbox">
                                                                        <input class="custom-control-input"
                                                                            type="checkbox"
                                                                            formControlName="gest_certificado"
                                                                            id="chkCertificado" value="0">
                                                                        <label class="truncate-text"
                                                                            for="chkCertificado"
                                                                            class="custom-control-label">Sol.
                                                                            Certificado</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-2 col-sm-6">
                                                                <div class="btn-group ml-2" role="group"
                                                                    aria-label="Basic example">
                                                                    <div class="custom-control custom-checkbox">
                                                                        <input class="custom-control-input"
                                                                            type="checkbox"
                                                                            formControlName="gest_perdio_contacto"
                                                                            id="chkPerdioContacto" value="0">
                                                                        <label class="truncate-text"
                                                                            for="chkPerdioContacto"
                                                                            class="custom-control-label">Perdió
                                                                            Contacto</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>


                                                    </form>
                                                </div>

                                                <div class="card-footer"
                                                    style="background-color: var(--color-formulario-terciario);">
                                                    <div class="row Centrar ">
                                                        <small>
                                                            <button class="btnAceptar ml-2"
                                                                *ngIf="TituloFormulario != 'Editar'"
                                                                [disabled]="GestionForms.invalid"
                                                                (click)="ActDesControles(1);GuardarObjeto(GestionForms.value);ActDesControles(0)">Guardar</button>
                                                            <button class="btnCancelar ml-2"
                                                                (click)="CerrarAgregarEditarElemento()">Cancelar</button>
                                                            <button class="btnInfo ml-2"
                                                                (click)="ResetGestionFormsLimpiar()">Limpiar</button>
                                                            <button class="btnInfo3 ml-2"
                                                                *ngIf="TituloFormulario != 'Editar'"
                                                                (click)="ResetGestionFormsLimpiar();ResetGestionFormsNoContactado()">No
                                                                Contactado</button>
                                                            <button class="btnInfo4 ml-2"
                                                                *ngIf="TituloFormulario != 'Editar'"
                                                                (click)="ResetGestionFormsLimpiar();UltimaGestion()">&Uacute;ltima
                                                                Gestión</button>
                                                        </small>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>

                                    </section>
                                </div>
                            </section>
                        </div>
                        <!-- FORMULARIO NOTIFICAR GESTOR -->
                        <section *ngIf="TipoVistaInfCliente == 1" class="content mt-2">
                            <div class="container-fluid">
                                <section class="row">
                                    <div class="col-md-12 connectedSortable ui-sortable">
                                        <div class="card direct-chat">
                                            <div class="card-header card-info card-outline">
                                                <h3 class="card-title">Notificar</h3>
                                                <div class="card-tools">
                                                    <button type="button" class="btn btn-tool"
                                                        data-card-widget="collapse">
                                                        <i class="fas fa-minus"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <div class="card-body small">
                                                <form [formGroup]="NotificacionForms">

                                                    <div class="row">

                                                        <div class="col-md-3">
                                                            <div class="box-profile">
                                                                <h5 class="text-center">Gestor:&nbsp;
                                                                    <strong class="small">{{Usuario.ges_nombres+'
                                                                        '+Usuario.ges_apellidos}}</strong>
                                                                </h5>
                                                            </div>


                                                        </div>
                                                        <div class="col-md-9">
                                                            <div class="form-floating mb-2">
                                                                <textarea type="text" class="form-control"
                                                                    formControlName="not_mensaje" id="not_mensaje"
                                                                    placeholder=""></textarea>
                                                                <label class="truncate-text" for="not_mensaje">Detalle
                                                                    de
                                                                    Notificación</label>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </form>
                                            </div>
                                            <div class="card-footer"
                                                style="background-color: var(--color-formulario-terciario);">
                                                <div class="row Centrar ">
                                                    <small>
                                                        <button class="btnAceptar ml-2"
                                                            [disabled]="NotificacionForms.invalid"
                                                            (click)="EnviarNotificacion(NotificacionForms.value)">Notificar</button>
                                                        <button class="btnCancelar ml-2"
                                                            (click)="CerrarAgregarEditarElemento()">Cancelar</button>
                                                    </small>
                                                </div>

                                            </div>

                                        </div>
                                    </div>

                                </section>
                            </div>
                        </section>

                    </section>

                    <!-- FORMULARIO PARA LISTAR ELEMENTOS -->
                    <section class="expand-bottom" *ngIf="TituloFormulario == ''">
                        <div class="card-header" style="background-color: var(--color-formulario-primario);">
                            <div class="row">
                                <div class="col-lg-2 col-md-2 col-sm-3 col-6">
                                    <p>Total<strong>&nbsp;{{ContadorDatosGeneral}}</strong></p>
                                </div>
                                <div class="col-lg-2 col-md-4 col-sm-4 col-6"
                                    *ngIf="ContadorDatosGeneral != ContadorDatos">
                                    <div>
                                        <p>Resultado Filtro<strong>&nbsp;{{ContadorDatos}}</strong></p>
                                    </div>
                                </div>
                                <div class="col-lg-2 col-md-4 col-sm-4 col-6">
                                    <div>
                                        <p>Elementos<strong>&nbsp;{{InicioPaginacion+1}}</strong>-<strong>&nbsp;{{InicioPaginacion
                                                + RangoPaginacion}}</strong></p>
                                    </div>
                                </div>
                                <!-- <div class="col">
                                    <div class="row  justify-content-end">
                                        <div class="col">
                                            <div class="float-right clearfix">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <button type="button" class="btn btnOk btn-sm dropdown-toggle"
                                                            data-toggle="dropdown" aria-expanded="false">
                                                            {{ FirltroPor}}
                                                        </button>
                                                        <ul class="dropdown-menu" x-placement="top-start">
                                                            <li class="dropdown-item" style="cursor: pointer;"
                                                                (click)="FiltrarPor('Nombre')">
                                                                <a>Nombre</a>
                                                            </li>
                                                            <li class="dropdown-item" style="cursor: pointer;"
                                                                (click)="FiltrarPor('Apellido')">
                                                                <a>Apellido</a>
                                                            </li>

                                                        </ul>
                                                    </div>

                                                    <input type="text" id="TxtFiltro" (keyup)="FiltrarLista(0)"
                                                        [formControl]="TextoFiltro"
                                                        class="form-control form-control-sm">

                                                    <div class="input-group-append">
                                                        <button type="button" class="btn btnOk btn-sm"
                                                            (click)="VaciarFiltro()">
                                                            <i class="bi bi-trash"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                            </div>
                        </div>

                        <div class="card-body" style="background-color: var(--color-formulario-secundario);"
                            *ngIf="!loading ;else loadingOrError">
                            <table class="table table-bordered table-responsive  table-auto small"
                                *ngIf="ListaGestionar.length != 0">
                                <thead>
                                    <tr>
                                        <th style="width: 10px">#</th>
                                        <th>Acciones</th>
                                        <th>Identificación</th>
                                        <th>Nombres</th>
                                        <th>Estado</th>
                                        <th>Saldo T.C</th>
                                        <th>Saldo CXC</th>
                                        <th>Pago Actual</th>
                                        <th>Gestor</th>
                                        <th>Cartera</th>
                                        <!-- <th>N</th> -->
                                        <th>Provincia</th>
                                        <th>Certificado</th>
                                        <th>Ultima Gestion</th>
                                        <th>Rango E</th>
                                        <th>PCont</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let datos of DatosCargaMasiva; let i = index">
                                        <td>{{InicioPaginacion + i + 1}}</td>
                                        <td>
                                            <small *ngIf="PaginaEstilo != ''">
                                                <button class="ml-2 btnGestionar" (click)="NotificarCliente(datos,1)">
                                                    <i class="fa-solid fa-people-carry-box"></i>
                                                </button>
                                            </small>
                                            <div class="btn-group" role="group">
                                                <small *ngIf="PaginaEstilo == ''">
                                                    <button class="ml-2 btnPagos" ngbTooltip="Agregar Pago"
                                                        (click)="AbrirModalAgregarPagos(2,datos.identificacion)">
                                                        <i class="fa-solid fa-sack-dollar"></i>
                                                    </button>
                                                </small>
                                                <small *ngIf="PaginaEstilo == ''">
                                                    <button *ngIf="LecturaEscritura != 0" class="ml-2 btnGestionar"
                                                        ngbTooltip="Gestionar" (click)="BuscarInfCliente(datos,0)">
                                                        <i class="fa-solid fa-people-carry-box"></i>
                                                    </button>
                                                </small>
                                            </div>
                                        </td>
                                        <td>{{datos.identificacion}}</td>
                                        <td><small>{{datos.nombres_cli}}</small></td>
                                        <td>{{datos.estado_cli}}</td>
                                        <td>{{datos.saldo_t}}</td>
                                        <td>{{datos.saldo_cxc}}</td>
                                        <td>{{datos.pago_actual}}</td>
                                        <td>{{datos.gestor}}</td>
                                        <td>{{datos.cartera}}</td>
                                        <!-- <td>{{datos.cartera_n}}</td> -->
                                        <td>{{datos.provincia_cli}}</td>
                                        <td>{{datos.cli_certificado==='3'?'Entregado':datos.cli_certificado==='1'?'Si':'No'}}
                                        </td>
                                        <!-- <td>{{datos.ultima_gestion}}</td> -->
                                        <td>{{datos.ultima_gestion == null || datos.ultima_gestion ==
                                            ''?'':fechas.fechaCortaAbt(datos.ultima_gestion)}}</td>
                                        <td>{{datos.edad_cli}}</td>
                                        <td>{{datos.creditos}}</td>

                                    </tr>
                                </tbody>
                            </table>

                        </div>

                        <div class="card-footer" style="background-color: var(--color-formulario-terciario);"
                            *ngIf="ListaGestionar.length != 0">
                            <div class="row justify-content-end">
                                <div class="col-lg-4 col-12">
                                    <div class="form-group">
                                        <div class="float-right">
                                            <small>
                                                <button
                                                    (click)="InicioPaginacion == 0 ? BtnPreviousUser(1) : BtnPreviousUser()"
                                                    *ngIf="FraccionDatos !== 0 || InicioPaginacion !== 0" type="button"
                                                    class="BtnNextPrevious" aria-label=""
                                                    style="display: inline-block;"><i
                                                        class="bi bi-arrow-left-circle"></i> Anterior
                                                </button>

                                                <button
                                                    *ngIf="(InicioPaginacion + RangoPaginacion) < ContadorDatos || ContadorDatos == RangoDatos"
                                                    (click)="(InicioPaginacion + RangoPaginacion) == ContadorDatos ? BtnNextUser(1) : BtnNextUser()"
                                                    type="button" class="BtnNextPrevious ml-2" aria-label=""
                                                    style="display: inline-block;">Siguiente
                                                    <i class="bi bi-arrow-right-circle"></i>
                                                </button>
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </section>


                </div>
            </div>
        </section>


        <router-outlet></router-outlet>
    </div>
</div>
<app-footer></app-footer>




<section class="modal" id="ModalAgregarCorreos">
    <div class="modal__container ">
        <div class="col-sm alert" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalAgregarCorreos()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">{{TituloFormularioAgregarCorreos}} Correo</h2>
            <form [formGroup]="CorreosForms">
                <div class="card-header">
                    <section class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <span>&nbsp;Id&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_identificacion}}&nbsp;</span>
                                    </div>


                                </div>
                                <div class="col-lg-8">
                                    <div class="form-group">
                                        <span>&nbsp;Nombres&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_nombres}}&nbsp;</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <section class="vertical-center">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="cor_email" placeholder=""
                                    formControlName="cor_email">
                                <label class="truncate-text" for="cor_email">Correo</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <span title="Tipo de Correo">Tipo de
                                correo</span>

                            <select style="height: 35px;" class="form-select" formControlName="cor_id_tipo_correo"
                                (click)="TipoCorreoList.length > 0?null:ListarTipoCorreos()">
                                <option *ngIf="TipoCorreoList.length == 0" disabled>
                                    Cargando ...
                                </option>
                                <option *ngFor="let s of TipoCorreoList" [value]="s.id_tipo_correo">
                                    {{s.corr_tip_descripcion}}
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="cor_descripcion" placeholder=""
                                    formControlName="cor_descripcion">
                                <label class="truncate-text" for="cor_descripcion">Descripción</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="Centrar">
                                <div class="btn-group">
                                    <div class="form-group">
                                        <label class="truncate-text" for="cor_esactivo">Estado</label>&nbsp;
                                        <div class="custom-control custom-switch Centrar" title="Estado">
                                            <input type="checkbox" class="custom-control-input"
                                                formControlName="cor_esactivo" name="estado" id="cor_esactivo">
                                            <label class="custom-control-label"
                                                for="cor_esactivo">{{CorreosForms.get('cor_esactivo')!.value
                                                == false ?
                                                'Inactivo' : 'Activo'}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <div class="card-footer">
                    <div class="row Centrar ">
                        <small>
                            <button class="btnAceptar" [disabled]="CorreosForms.invalid"
                                *ngIf="TituloFormularioAgregarCorreos != ''" id="btnAgregar"
                                (click)="GuardarObjetoCorreo(CorreosForms.value)">Guardar</button>
                            <button class="btnCancelar ml-3" (click)="CerrarModalAgregarCorreos()">Cancelar</button>
                        </small>
                    </div>
                </div>

            </form>
        </div>
    </div>
</section>

<section class="modal" id="ModalAgregarDereccion">
    <div class="modal__container ">
        <div class="col-sm alert" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalAgregarDirecciones()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">{{TituloFormularioAgregarDirecciones}} Dirección</h2>
            <form [formGroup]="DireccionesForms">
                <div class="card-header">
                    <section class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <span>&nbsp;Id&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_identificacion}}&nbsp;</span>
                                    </div>


                                </div>
                                <div class="col-lg-8">
                                    <div class="form-group">
                                        <span>&nbsp;Nombres&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_nombres}}&nbsp;</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <section class="vertical-center">
                    <div class="row">
                        <div class="col-md-6">
                            <span title="Tipo de Correo">Tipo de
                                Dirección</span>
                            <select class="form-select" formControlName="dir_id_tipo_direccion"
                                (click)="TipoDireccionList.length != 0?null:ListarTipoDirecciones()">
                                <option *ngIf="TipoDireccionList.length == 0" disabled>Cargando ...
                                </option>
                                <option *ngFor="let s of TipoDireccionList" [value]="s.id_tipo_direccion">
                                    {{s.dir_tip_descripcion}}
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="dir_completa" placeholder=""
                                    formControlName="dir_completa">
                                <label class="truncate-text" for="dir_completa">Dirección completa</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="dir_calle_principal" placeholder=""
                                    formControlName="dir_calle_principal">
                                <label class="truncate-text" for="dir_calle_principal">Calle principal</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="dir_calle_secundaria" placeholder=""
                                    formControlName="dir_calle_secundaria">
                                <label class="truncate-text" for="dir_calle_secundaria">Calle secundaria</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="dir_numero_casa" placeholder=""
                                    formControlName="dir_numero_casa">
                                <label class="truncate-text" for="dir_numero_casa">Número de casa</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="dir_referencia" placeholder=""
                                    formControlName="dir_referencia">
                                <label class="truncate-text" for="dir_referencia">Referencia</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="dir_provincia" placeholder=""
                                    formControlName="dir_provincia">
                                <label class="truncate-text" for="dir_provincia">Provincia</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="dir_canton" placeholder=""
                                    formControlName="dir_canton">
                                <label class="truncate-text" for="dir_canton">Cantón</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="dir_parroquia" placeholder=""
                                    formControlName="dir_parroquia">
                                <label class="truncate-text" for="dir_parroquia">Parroquia</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="Centrar">
                                <div class="btn-group">
                                    <div class="form-group">
                                        <label class="truncate-text" for="dir_esactivo">Estado</label>&nbsp;
                                        <div class="custom-control custom-switch Centrar" title="Estado">
                                            <input type="checkbox" class="custom-control-input"
                                                formControlName="dir_esactivo" name="estado" id="dir_esactivo">
                                            <label class="custom-control-label"
                                                for="dir_esactivo">{{DireccionesForms.get('dir_esactivo')!.value
                                                == false ?
                                                'Inactivo' : 'Activo'}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <div class="card-footer">
                    <div class="row Centrar ">
                        <small>
                            <button class="btnAceptar" [disabled]="DireccionesForms.invalid"
                                *ngIf="TituloFormularioAgregarDirecciones != ''" id="btnAgregar"
                                (click)="GuardarObjetoDirecciones(DireccionesForms.value)">Guardar</button>
                            <button class="btnCancelar ml-3" (click)="CerrarModalAgregarDirecciones()">Cancelar</button>
                        </small>
                    </div>
                </div>

            </form>
        </div>
    </div>
</section>

<section class="modal" id="ModalAgregarGarante">
    <div class="modal__container ">
        <div class="col-sm alert" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalAgregarGarante()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">{{TituloFormularioAgregarGarante}} Garante</h2>
            <form [formGroup]="GarantesForms">
                <div class="card-header">
                    <section class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <span>&nbsp;Id&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_identificacion}}&nbsp;</span>
                                    </div>


                                </div>
                                <div class="col-lg-8">
                                    <div class="form-group">
                                        <span>&nbsp;Nombres&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_nombres}}&nbsp;</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <section class="vertical-center">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="gar_identificacion" placeholder=""
                                    formControlName="gar_identificacion">
                                <label class="truncate-text" for="gar_identificacion">Identificación del Garante</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="gar_nombres" placeholder=""
                                    formControlName="gar_nombres">
                                <label class="truncate-text" for="gar_nombres">Nombre del Garante</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="Centrar">
                                <div class="btn-group">
                                    <div class="form-group">
                                        <label class="truncate-text" for="gar_trabajo">Tiene trabajo</label>&nbsp;
                                        <div class="custom-control custom-switch Centrar" title="Estado">
                                            <input type="checkbox" class="custom-control-input"
                                                formControlName="gar_trabajo" name="estado" id="gar_trabajo">
                                            <label class="custom-control-label"
                                                for="gar_trabajo">{{GarantesForms.get('gar_trabajo')!.value
                                                == false ?
                                                'No' : 'Si'}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <textarea type="email" class="form-control" id="gar_direccion_dom" placeholder=""
                                    formControlName="gar_direccion_dom"></textarea>
                                <label class="truncate-text" for="gar_direccion_dom">Dirección domiciliaria</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <textarea type="email" class="form-control" id="gar_direccion_trabajo" placeholder=""
                                    formControlName="gar_direccion_trabajo"></textarea>
                                <label class="truncate-text" for="gar_direccion_trabajo">Dirección de trabajo</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="gar_telefono_domicilio" placeholder=""
                                    formControlName="gar_telefono_domicilio">
                                <label class="truncate-text" for="gar_telefono_domicilio">Teléfono domiciliario</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="gar_telefono_trabajo" placeholder=""
                                    formControlName="gar_telefono_trabajo">
                                <label class="truncate-text" for="gar_telefono_trabajo">Teléfono de trabajo</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="gar_telefono_adicional" placeholder=""
                                    formControlName="gar_telefono_adicional">
                                <label class="truncate-text" for="gar_telefono_adicional">Teléfono adicional</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <textarea type="email" class="form-control" id="gar_observacion" placeholder=""
                                    formControlName="gar_observacion"></textarea>
                                <label class="truncate-text" for="gar_observacion">Observación</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="Centrar">
                                <div class="btn-group">
                                    <div class="form-group">
                                        <label class="truncate-text" for="gar_esactivo">Estado</label>&nbsp;
                                        <div class="custom-control custom-switch Centrar" title="Estado">
                                            <input type="checkbox" class="custom-control-input"
                                                formControlName="gar_esactivo" name="estado" id="gar_esactivo">
                                            <label class="custom-control-label"
                                                for="gar_esactivo">{{GarantesForms.get('gar_esactivo')!.value
                                                == false ?
                                                'Inactivo' : 'Activo'}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <div class="card-footer">
                    <div class="row Centrar ">
                        <small>
                            <button class="btnAceptar" [disabled]="GarantesForms.invalid"
                                *ngIf="TituloFormularioAgregarGarante != ''" id="btnAgregar"
                                (click)="GuardarObjetoGarante(GarantesForms.value)">Guardar</button>
                            <button class="btnCancelar ml-3" (click)="CerrarModalAgregarGarante()">Cancelar</button>
                        </small>
                    </div>
                </div>

            </form>
        </div>
    </div>
</section>


<section class="modal frente" id="ModalAgregarTelefono">
    <div class="modal__container ">
        <div class="col-sm alert" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalAgregarTelefonos()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">{{TituloFormularioAgregarCorreos}} Teléfono</h2>
            <form [formGroup]="TelefonosForms">
                <div class="card-header">
                    <section class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <span>&nbsp;Id&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_identificacion}}&nbsp;</span>
                                    </div>


                                </div>
                                <div class="col-lg-8">
                                    <div class="form-group">
                                        <span>&nbsp;Nombres&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_nombres}}&nbsp;</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <section class="vertical-center">
                    <div class="row">
                        <div class="col-md-6">
                            <span title="Tipo de Correo">Tipo de teléfono</span>

                            <select style="height: 35px;" class="form-select" formControlName="tel_id_tipo_telefono"
                                (click)="TipoTelefonoList.length != 0?null:ListarTipoTelefonos()">
                                <option *ngIf="TipoTelefonoList.length == 0" disabled>Cargando ...
                                </option>
                                <option *ngFor="let s of TipoTelefonoList" [value]="s.id_tipo_telefono">
                                    {{s.tel_tip_descripcion}}
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="tel_numero" placeholder=""
                                    formControlName="tel_numero">
                                <label class="truncate-text" for="tel_numero">Número</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="tel_observacion" placeholder=""
                                    formControlName="tel_observacion">
                                <label class="truncate-text" for="tel_observacion">Observación</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row Centrar mb-3">
                                <div class="col-lg-5 col-12">
                                    <label class="truncate-text" for="tel_operadora">Operadora</label>
                                </div>
                                <div class="col-lg-7 col-12">
                                    <select class="form-select" formControlName="tel_operadora"
                                        style="max-width: 175px;min-width: 125px;">
                                        <option *ngIf="Operadora.length == 0" disabled>Cargando
                                            ...
                                        </option>
                                        <option *ngFor="let s of Operadora" [value]="s.value">
                                            {{s.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="Centrar">
                                <div class="btn-group">
                                    <div class="form-group">
                                        <label class="truncate-text" for="tel_tipo_operadora">Tipo</label>&nbsp;
                                        <div class="custom-control custom-switch Centrar" title="Tipo Telefono">
                                            <input type="checkbox" class="custom-control-input"
                                                formControlName="tel_tipo_operadora" name="Tipo Telefono"
                                                id="tel_tipo_operadora">
                                            <label class="custom-control-label"
                                                for="tel_tipo_operadora">{{TelefonosForms.get('tel_tipo_operadora')!.value
                                                == true ?
                                                'MOVIL' : 'FIJO'}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="Centrar">
                                <div class="btn-group">
                                    <div class="form-group">
                                        <label class="truncate-text" for="tel_esactivo">Estado</label>&nbsp;
                                        <div class="custom-control custom-switch Centrar" title="Estado">
                                            <input type="checkbox" class="custom-control-input"
                                                formControlName="tel_esactivo" name="estado" id="tel_esactivo">
                                            <label class="custom-control-label"
                                                for="tel_esactivo">{{TelefonosForms.get('tel_esactivo')!.value
                                                == false ?
                                                'Inactivo' : 'Activo'}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <span title="Tipo de Correo">Detalle de
                                teléfono</span>

                            <select style="height: 35px;" class="form-select" formControlName="tel_id_detal_telefono"
                                (click)="DetalleTelefonoList.length != 0?null:ListarDetTelefono()">
                                <option *ngIf="DetalleTelefonoList.length == 0" disabled>Cargando ...
                                </option>
                                <option *ngFor="let s of DetalleTelefonoList" [value]="s.id_detalle_telefono">
                                    {{s.tel_detal_descripcion}}
                                </option>
                            </select>
                        </div>


                    </div>
                </section>

                <div class="card-footer">
                    <div class="row Centrar ">
                        <small>
                            <button class="btnAceptar" [disabled]="TelefonosForms.invalid"
                                *ngIf="TituloFormularioAgregarTelefonos != ''" id="btnAgregar"
                                (click)="GuardarObjetoTelefonos(TelefonosForms.value)">Guardar</button>
                            <button class="btnCancelar ml-3" (click)="CerrarModalAgregarTelefonos()">Cancelar</button>
                        </small>
                    </div>
                </div>

            </form>
        </div>
    </div>
</section>

<section class="modal" id="ModalAgregarTrabajos">
    <div class="modal__container ">
        <div class="col-sm alert" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalAgregarTrabajos()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">{{TituloFormularioAgregarTrabajos}} Trabajo</h2>
            <form [formGroup]="TrabajosForms">
                <div class="card-header">
                    <section class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <span>&nbsp;Id&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_identificacion}}&nbsp;</span>
                                    </div>


                                </div>
                                <div class="col-lg-8">
                                    <div class="form-group">
                                        <span>&nbsp;Nombres&nbsp;</span>
                                        <span>&nbsp;{{ClienteInf?.cli_nombres}}&nbsp;</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <section class="vertical-center">
                    <div class="row">
                        <div class="col-md-6">
                            <span title="Tipo de Correo">Tipo de
                                trabajo</span>

                            <select style="height: 35px;" class="form-select" formControlName="tra_id_tipo_trabajo"
                                (click)="TipoTrabajoList.length != 0?null:ListarTipoTrabajo()">
                                <option *ngIf="TipoTrabajoList.length == 0" disabled>Cargando ...
                                </option>
                                <option *ngFor="let s of TipoTrabajoList" [value]="s.trab_tip_descripcion">
                                    {{s.trab_tip_descripcion}}
                                </option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="tra_ruc" placeholder=""
                                    formControlName="tra_ruc">
                                <label class="truncate-text" for="tra_ruc">Ruc-Emp</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="tra_descripcion" placeholder=""
                                    formControlName="tra_descripcion">
                                <label class="truncate-text" for="tra_descripcion">Descripción</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="tra_direccion" placeholder=""
                                    formControlName="tra_direccion">
                                <label class="truncate-text" for="tra_direccion">Dirección</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="tra_telefono" placeholder=""
                                    formControlName="tra_telefono">
                                <label class="truncate-text" for="tra_telefono">Teléfono</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="tra_correo" placeholder=""
                                    formControlName="tra_correo">
                                <label class="truncate-text" for="tra_correo">Correo</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="tra_observacion" placeholder=""
                                    formControlName="tra_observacion">
                                <label class="truncate-text" for="tra_observacion">Observación</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="Centrar">
                                <div class="btn-group">
                                    <div class="form-group">
                                        <label class="truncate-text" for="tra_esactivo">Estado</label>&nbsp;
                                        <div class="custom-control custom-switch Centrar" title="Estado">
                                            <input type="checkbox" class="custom-control-input"
                                                formControlName="tra_esactivo" name="estado" id="tra_esactivo">
                                            <label class="custom-control-label"
                                                for="tra_esactivo">{{TrabajosForms.get('tra_esactivo')!.value
                                                == false ?
                                                'Inactivo' : 'Activo'}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <div class="card-footer">
                    <div class="row Centrar ">
                        <small>
                            <button class="btnAceptar" [disabled]="TrabajosForms.invalid"
                                *ngIf="TituloFormularioAgregarTrabajos != ''" id="btnAgregar"
                                (click)="GuardarObjetoTrabajos(TrabajosForms.value)">Guardar</button>
                            <button class="btnCancelar ml-3" (click)="CerrarModalAgregarTrabajos()">Cancelar</button>
                        </small>
                    </div>
                </div>

            </form>
        </div>
    </div>
</section>

<section class="modal" id="ModalAgregarPagos">
    <div class="modal__container ">
        <div class="col-sm alert" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalAgregarPagos()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">{{TituloFormularioAgregarPagos}} pago</h2>
            <div class="row">

                <div class="col-md-8">
                    <form [formGroup]="PagosForms">
                        <div class="row">

                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input type="text" class="form-control" id="cli_identificacion" placeholder=""
                                        formControlName="cli_identificacion" (ngModelChange)="BuscarCliente()">
                                    <label for="cli_identificacion"><small>*</small>Cédula/Ruc/Pasaporte</label>
                                    <Section>
                                        <div class="error-message" *ngIf="PagosForms.get('cli_identificacion')?.hasError('required') 
                                    && PagosForms.get('cli_identificacion')?.touched">
                                            <span style="color: brown;">*Este campo es
                                                obligatorio.</span>
                                        </div>
                                    </Section>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating ">
                                    <input type="text" class="form-control" id="clinombres" placeholder=""
                                        [formControl]="ClientePago">
                                    <label for="clinombres">Nombres</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <span title=""><small>*</small>Producto</span>

                                    <select style="height: 35px;" class="form-select" formControlName="ope_cod_credito"
                                        (ngModelChange)="SeleccionProducto()"
                                        (click)="ListaCreditos.length == 0?ListarCreditos():null">
                                        <option value="" disabled selected>
                                            Seleccione ...
                                        </option>
                                        <option *ngIf="ListaCreditos.length == 0" disabled>
                                            Cargando
                                            ...
                                        </option>
                                        <option *ngFor="let s of ListaCreditos" [value]="s.ope_cod_credito">
                                            {{s.ope_producto}}
                                        </option>
                                    </select>
                                    <Section>
                                        <div class="error-message" *ngIf="PagosForms.get('ope_cod_credito')?.hasError('required') 
                                    && PagosForms.get('ope_cod_credito')?.touched">
                                            <span style="color: brown;">*Este campo es
                                                obligatorio.</span>
                                        </div>
                                    </Section>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="form-group">
                                            <span title=""><small>*</small>Teléfono</span>

                                            <select style="height: 35px;" class="form-select"
                                                formControlName="pag_medio_contacto"
                                                (click)="ListaContacto.length == 0?ListarContacto():null">
                                                <option value="" disabled selected>
                                                    Seleccione ...
                                                </option>
                                                <option *ngIf="ListaContacto.length == 0" disabled>
                                                    Cargando
                                                    ...
                                                </option>
                                                <option *ngFor="let s of ListaContacto" [value]="s.id_telefono">
                                                    {{s.tel_numero}}
                                                </option>
                                            </select>
                                            <Section>
                                                <div class="error-message" *ngIf="PagosForms.get('pag_medio_contacto')?.hasError('required') 
                                            && PagosForms.get('pag_medio_contacto')?.touched">
                                                    <span style="color: brown;">*Este campo es
                                                        obligatorio.</span>
                                                </div>
                                            </Section>
                                        </div>

                                    </div>
                                    <div class="col ContenidoVertical">
                                        <button *ngIf="LecturaEscritura != 0" type="button"
                                            class="btnAgregar small small " (click)="AbrirModalAgregarTelefono(1)"><i
                                                class="bi bi-plus-circle-dotted"></i></button>
                                    </div>

                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <span title=""><small>*</small>Cuenta</span>

                                    <select style="height: 35px;" class="form-select" formControlName="id_cuenta"
                                        (click)="ListaCuentas.length == 0?ListarCuentas():null">
                                        <option value="" disabled selected>
                                            Seleccione ...
                                        </option>
                                        <option *ngIf="ListaCuentas.length == 0" disabled>
                                            Cargando
                                            ...
                                        </option>
                                        <option *ngFor="let s of ListaCuentas" [value]="s.id_cuenta">
                                            {{s.cuent_nombre}}
                                        </option>
                                    </select>
                                    <Section>
                                        <div class="error-message" *ngIf="PagosForms.get('id_cuenta')?.hasError('required') 
                                        && PagosForms.get('id_cuenta')?.touched">
                                            <span style="color: brown;">*Este campo es
                                                obligatorio.</span>
                                        </div>
                                    </Section>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="pag_codigo_comprobante" placeholder=""
                                        formControlName="pag_codigo_comprobante">
                                    <label for="pag_codigo_comprobante"><small>*</small>Código comprobante</label>
                                    <Section>
                                        <div class="error-message" *ngIf="PagosForms.get('pag_codigo_comprobante')?.hasError('required') 
                                    && PagosForms.get('pag_codigo_comprobante')?.touched">
                                            <span style="color: brown;">*Este campo es
                                                obligatorio.</span>
                                        </div>
                                    </Section>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="date" class="form-control" id="pag_fecha_pago" placeholder=""
                                        formControlName="pag_fecha_pago">
                                    <label for="pag_fecha_pago"><small>*</small>Fecha Pago</label>
                                    <Section>
                                        <div class="error-message" *ngIf="PagosForms.get('pag_fecha_pago')?.hasError('required') 
                                    && PagosForms.get('pag_fecha_pago')?.touched">
                                            <span style="color: brown;">*Este campo es
                                                obligatorio.</span>
                                        </div>
                                    </Section>
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="pag_pago" placeholder=""
                                        formControlName="pag_pago">
                                    <label for="pag_pago"><small>*</small>Abono CXC</label>
                                    <Section>
                                        <div class="error-message" *ngIf="PagosForms.get('pag_pago')?.hasError('required') 
                                    && PagosForms.get('pag_pago')?.touched">
                                            <span style="color: brown;">*Este campo es
                                                obligatorio.</span>
                                        </div>
                                        <div class="error-message" *ngIf="PagosForms.get('pag_pago')?.value != ''
                                    ? validar.V_NumerosDesimales(PagosForms.get('pag_pago')?.value!)  === false:null ">
                                            <span style="color: brown;">*contiene caracteres
                                                no permitidos en este campo.</span>
                                        </div>
                                        <div class="error-message"
                                            *ngIf="PagosForms.get('pag_pago')?.value != '' && PagosForms.get('pag_valor_total_comprobante')?.value != '' 
                                        ? validar.V_MayorQue(PagosForms.get('pag_pago')?.value!,PagosForms.get('pag_valor_total_comprobante')?.value!)  === false:null ">
                                            <span style="color: brown;">*El valor no puede ser mayor al
                                                comprobante.</span>
                                        </div>
                                    </Section>
                                </div>

                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="pag_valor_total_comprobante"
                                        placeholder="" formControlName="pag_valor_total_comprobante">
                                    <label for="pag_valor_total_comprobante"><small>*</small>Valor
                                        Comprobante</label>
                                    <Section>
                                        <div class="error-message" *ngIf="PagosForms.get('pag_valor_total_comprobante')?.hasError('required') 
                                        && PagosForms.get('pag_valor_total_comprobante')?.touched">
                                            <span style="color: brown;">*Este campo es
                                                obligatorio.</span>
                                        </div>
                                        <div class="error-message"
                                            *ngIf="PagosForms.get('pag_valor_total_comprobante')?.value != ''
                                        ? validar.V_NumerosDesimales(PagosForms.get('pag_valor_total_comprobante')?.value!)  === false:null ">
                                            <span style="color: brown;">*contiene caracteres
                                                no permitidos en este campo.</span>
                                        </div>
                                        <div class="error-message"
                                            *ngIf="PagosForms.get('pag_pago')?.value != '' && PagosForms.get('pag_valor_total_comprobante')?.value != '' 
                                        ? validar.V_MayorQue(PagosForms.get('pag_pago')?.value!,PagosForms.get('pag_valor_total_comprobante')?.value!)  === false:null ">
                                            <span style="color: brown;">*El valor no puede ser menor al
                                                comprobante.</span>
                                        </div>
                                    </Section>
                                </div>
                            </div>


                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <textarea type="text" class="form-control" id="pag_observ_comprobante"
                                        placeholder="" formControlName="pag_observ_comprobante"></textarea>
                                    <label for="pag_observ_comprobante">Observación
                                        Comprobante</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <textarea type="text" class="form-control" id="pag_observacion_pago" placeholder=""
                                        formControlName="pag_observacion_pago"></textarea>
                                    <label for="pag_observacion_pago">Observación Pago</label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-md-4">
                    <div class="row" *ngIf="TituloFormulario != 'Visualizar'">
                        <div class="col-md-10 Centrar">
                            <div class="form-floating mb-3">
                                <input type="file" class="form-control" id="comprovante"
                                    (change)="onFileSelected($event)" accept=".jpg,.jpeg">
                                <label for="comprovante">Imagen</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-md-10 Centrar">
                            <!-- <img *ngIf="previewUrl" [src]="previewUrl" alt="Preview"
                                    style="max-width: 100%; max-height: 300px;"> -->
                            <a data-lightbox="image-preview" (click)="verImagen()">
                                <img *ngIf="previewUrl" [src]="previewUrl" alt="Preview"
                                    style="max-width: 100%; max-height: 300px;">
                            </a>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row Centrar ">
                <small>
                    <button class="btnAceptar" [disabled]="PagosForms.invalid || ClientePago.value == ''"
                        *ngIf="TituloFormulario != 'Visualizar'" id="btnAgregar"
                        (click)="GuardarObjetoPagos(PagosForms.value)">Guardar</button>
                    <button class="btnCancelar ml-3" (click)="CerrarModalAgregarPagos()">Cancelar</button>
                </small>
            </div>
        </div>
    </div>
</section>


<section class="modal" id="ModalFamiliares">
    <div class="modal__container card card-primary card-outline" style="min-width: 60%;">
        <div class="col-sm card-header" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalFamiliares()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">Familiares</h2>
        </div>

        <div class="card-body" *ngIf="!SesionServiData">
            <div class="wrapper fadeInDown">
                <div id="formContent">
                    <form class="forml" [formGroup]="loginForm" (ngSubmit)="onLoginPost(loginForm.value)"
                        style="width: 300px; margin: 0 auto;">
                        <div class="rowl" style="display: flex; flex-direction: column;">
                            <input type="text" id="login" class="inputl fadeIn second" placeholder="login"
                                formControlName="codUsuario" style="margin-bottom: 10px; padding: 5px;">
                            <input type="password" id="password" class="inputl fadeIn third" placeholder="password"
                                formControlName="passwordusuario" style="margin-bottom: 10px; padding: 5px;">
                            <input type="submit" class="inputl fadeIn fourth" value="Log In" style="padding: 5px;">
                        </div>
                    </form>
                    <div class="alert alert-danger" *ngIf="errorStatus">
                        <p>{{errorMsj}}</p>
                    </div>




                </div>
            </div>

        </div>

        <div class="card-body" *ngIf="SesionServiData">
            <div class="row">
                <div class="col-md-3 small">
                    <div class="nav flex-column nav-tabs h-100" id="vert-tabs-tab" role="tablist"
                        aria-orientation="vertical">
                        <a class="nav-link truncate-text active" id="vert-tabs-home-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-home" aria-selected="true"
                            (click)="CambiarParentezco(18)" *ngIf="DatosPersonas.length > 0">Titular <span
                                class="badge badge-info ml-2">{{DatosPersonas!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-messages-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-messages" aria-selected="false"
                            (click)="CambiarParentezco(0)" *ngIf="DatosPadres!.length > 0">Padres <span
                                class="badge badge-info ml-2">{{DatosPadres!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(1)" *ngIf="DatosConyuge!.length > 0">Conyugue <span
                                class="badge badge-info ml-2">{{DatosConyuge!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(2)" *ngIf="DatosPadreDeHijo!.length > 0">Padre de
                            Hijo/a <span class="badge badge-info ml-2">{{DatosPadreDeHijo!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(3)" *ngIf="DatosMadreDeHijo!.length > 0">Madre de
                            Hijo/a <span class="badge badge-info ml-2">{{DatosMadreDeHijo!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(4)" *ngIf="DatosHijos!.length > 0">Hijos <span
                                class="badge badge-info ml-2">{{DatosHijos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(5)" *ngIf="DatosHermanos!.length > 0">Hermanos
                            <span class="badge badge-info ml-2">{{DatosHermanos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-profile-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-profile" aria-selected="false"
                            (click)="CambiarParentezco(6)" *ngIf="DatosAbuelos!.length > 0">Abuelos <span
                                class="badge badge-info ml-2">{{DatosAbuelos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(7)" *ngIf="DatosTios!.length > 0">Tíos <span
                                class="badge badge-info ml-2">{{DatosTios!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(8)" *ngIf="DatosPrimos!.length > 0">Primos <span
                                class="badge badge-info ml-2">{{DatosPrimos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(9)" *ngIf="DatosSobrinos!.length > 0">Sobrinos
                            <span class="badge badge-info ml-2">{{DatosSobrinos!.length}}</span></a>
                        <a class="nav-link  " id="vert-tabs-settings-tab" data-toggle="pill" href="#ConteFamiliar"
                            role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(10)" *ngIf="DatosNietos!.length > 0">Nietos <span
                                class="badge badge-info ml-2">{{DatosNietos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(11)" *ngIf="DatosSuegros!.length > 0">Suegros <span
                                class="badge badge-info ml-2">{{DatosSuegros!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(12)" *ngIf="DatosCunados!.length > 0">Cuñados <span
                                class="badge badge-info ml-2">{{DatosCunados!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(13)" *ngIf="DatosHijosPoliticos!.length > 0">Hijos
                            Políticos <span class="badge badge-info ml-2">{{DatosHijosPoliticos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(14)" *ngIf="DatosTiosPoliticos!.length > 0">Tíos
                            Políticos <span class="badge badge-info ml-2">{{DatosTiosPoliticos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(15)" *ngIf="DatosPrimosPoliticos!.length > 0">Primos Políticos
                            <span class="badge badge-info ml-2">{{DatosPrimosPoliticos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(16)" *ngIf="DatosSobrinosPoliticos!.length > 0">Sobrinos
                            Políticos <span class="badge badge-info ml-2">{{DatosSobrinosPoliticos!.length}}</span></a>
                        <a class="nav-link truncate-text" id="vert-tabs-settings-tab" data-toggle="pill"
                            href="#ConteFamiliar" role="tab" aria-controls="vert-tabs-settings" aria-selected="false"
                            (click)="CambiarParentezco(17)" *ngIf="DatosConcunados!.length > 0">Concuñados
                            <span class="badge badge-info ml-2">{{DatosConcunados!.length}}</span></a>

                    </div>
                </div>
                <div class="col-sm-9 small">
                    <div class="tab-content" id="vert-tabs-tabContent">
                        <div class="tab-pane fade active show" id="ConteFamiliar" role="tabpanel"
                            aria-labelledby="vert-tabs-home-tab">

                            <div class="card-header Card-Fonfo">
                                <h3 class="title" #lblPArentezco>{{txtParentezco}}</h3>
                            </div>

                            <div class="table table-sm table-responsive table-hover">
                                <div *ngIf="DatosFamiliares.length > 0; else loadingOrError1">
                                    <table class="table-auto small">
                                        <small>
                                            <thead>
                                                <tr style="color: black;">
                                                    <th style="width: 10px">#</th>
                                                    <th>Nombres</th>
                                                    <th>Cédula</th>
                                                    <th>Estado Civil</th>
                                                    <th>Edad</th>
                                                    <th>Condición</th>
                                                    <th>Ver</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let datos of DatosFamiliares; let i = index">

                                                    <td>{{FraccionDatosInicio + i +1}}</td>
                                                    <td>{{datos.pernombres}}</td>
                                                    <td><small>{{datos.percedula}}</small></td>
                                                    <td><small>{{datos.perestadocivil}}</small></td>
                                                    <td><small>{{datos.perEdad}}</small></td>
                                                    <td><small>{{datos.idcondicion}}</small></td>
                                                    <td><small><a (click)="AbrirVentanaServiData(datos.percedula)"
                                                                target="_blank">
                                                                <i class="bi bi-eye-fill btnBuscar"
                                                                    title="Ver registro seleccionado"></i></a></small>
                                                    </td>

                                                </tr>
                                            </tbody>
                                        </small>
                                    </table>
                                </div>
                            </div>

                            <div class="card-footer clearfix Card-Fonfo">

                                <ul class="pagination pagination-sm m-0 float-right">
                                    <small>
                                        <button (click)="BtnPreviousFamilia()" *ngIf="FraccionDatosInicio !== 0"
                                            type="button" class="BtnNextPrevious" aria-label=""
                                            style="display: inline-block;"><i class="bi bi-arrow-left-circle"></i>
                                            Anterior</button>

                                        <button *ngIf="(FraccionDatosInicio + 5) < ContadorDatosFamiliares"
                                            (click)="BtnNextFamilia()" type="button" class="BtnNextPrevious ml-2 "
                                            aria-label="" style="display: inline-block;">Siguiente <i
                                                class="bi bi-arrow-right-circle"></i></button>
                                    </small>

                                </ul>

                            </div>



                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>



<section class="modal" id="ModalGestionesAnteriores">
    <div class="modal__container ">
        <div class="col-sm alert" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalGestionesAnteriores()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">Gestiones Anteriores</h2>
            <section>
                <h4>{{Cliente}}</h4>
            </section>

            <section class="vertical-center">
                <div class="table table-sm table-responsive table-hover" style="max-height: 300px">
                    <div>
                        <table class="table-auto small">
                            <small>
                                <thead>
                                    <tr style="color: black;">
                                        <th>#</th>
                                        <th>Fecha Gestion</th>
                                        <th>Gestor</th>
                                        <th>Contactabilidad</th>
                                        <th>Detalle de Gestion</th>
                                        <th>Contacto</th>
                                        <th>Fecha compromiso</th>
                                        <th>valor</th>
                                        <th>Cuota</th>
                                        <th>N Cuotas</th>
                                        <th>N Cuotas Restantes</th>
                                        <th>Cobrar</th>
                                        <th>Abonos</th>
                                        <th>Incumplido</th>
                                        <th>Proximo pago</th>
                                        <th>Fecha a llamar</th>
                                        <th>Hora</th>
                                        <th>Perdio Contacto</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let datos of ListaGestionesAnt; let i = index">
                                        <td>{{InicioPaginacion + i +1}}</td>
                                        <td>{{fechas.fechaCortaAbtF1(datos.gest_fecha_gestion)}}</td>
                                        <td>{{datos.gest_nombres}}</td>
                                        <td><small>{{datos.contac_descripcion}}</small></td>
                                        <td><small>{{datos.gest_descripcion}}</small></td>
                                        <td><small>{{datos.gest_num_contacto}}</small></td>
                                        <td><small>{{datos.gest_fecha_compromiso ==
                                                null?"":fechas.fechaCortaAbt(datos.gest_fecha_compromiso)}}</small></td>
                                        <td><small>{{datos.gest_valor}}</small></td>
                                        <td><small>{{datos.gest_couta}}</small></td>
                                        <td><small>{{datos.gest_num_coutas}}</small></td>
                                        <td><small>{{datos.gest_num_coutas_res}}</small></td>
                                        <td><small>{{datos.gest_valora_cobrar}}</small></td>
                                        <td><small>{{datos.gest_abonos}}</small></td>
                                        <td><small>{{datos.gest_valor_incumplido}}</small></td>
                                        <td><small>{{datos.gest_fecha_prox_pago ==
                                                null?"":fechas.fechaCortaAbt(datos.gest_fecha_prox_pago)}}</small></td>
                                        <td><small>{{datos.gest_fecha_volver_llamar ==
                                                null?"":fechas.fechaCortaAbt(datos.gest_fecha_volver_llamar)}}</small>
                                        </td>
                                        <td><small>{{datos.gest_hora_volver_llamar}}</small></td>
                                        <td><small>{{datos.gest_perdio_contacto == 1?"Si":""}}</small></td>

                                    </tr>
                                </tbody>
                            </small>
                        </table>
                    </div>
                </div>
            </section>

        </div>
    </div>
</section>


<section class="modal" id="ModalActualizaciones">
    <div class="modal__container card card-primary card-outline" style="min-width: 60%;">
        <div class="col-sm card-header" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalActualizaciones()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">Actualizaciones</h2>
            <section>
                <h4>{{Cliente}}</h4>
            </section>
        </div>


        <div class="col-sm card-body" style="background-color: var(--color-formulario-secundario);">
            <table class="table table-bordered table-responsive  table-auto small">
                <thead>
                    <tr style="color: black;">
                        <th>#</th>
                        <th>id</th>
                        <th>Codigo Cxc</th>
                        <th>Cartera</th>
                        <th>Mes Act.</th>
                        <th>Linea</th>
                        <th>Producto</th>
                        <th>Días de mora</th>
                        <th>Interes de mora</th>
                        <th>Gastos de cobranzas</th>
                        <th>Saldo cxc actual</th>
                        <th>Saldo cuota actual</th>
                        <th>Saldo capital venc</th>
                        <th>Liquidar</th>
                        <th>Fecha venc</th>
                        <th>Fecha in</th>
                        <th>Fecha entrega</th>
                        <th>Observación actualización</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let datos of ListaActualizacionesCredito; let i = index">
                        <td>{{InicioPaginacion + i +1}}</td>
                        <td><small>{{datos.id_cxc_operacion_act}}</small></td>
                        <td><small>{{datos.act_ope_cod_credito}}</small></td>
                        <td><small>{{datos.cartera}}</small></td>
                        <td><small>{{datos.act_ope_mes_actualizacion}}</small></td>
                        <td><small>{{datos.act_ope_linea}}</small></td>
                        <td><small>{{datos.act_ope_producto}}</small></td>
                        <td><small>{{datos.act_ope_dias_mora}}</small></td>
                        <td><small>{{datos.act_ope_interes_mora}}</small></td>
                        <td><small>{{datos.act_ope_gastos_cobranzas}}</small></td>
                        <td><small>{{datos.act_ope_saldo_cxc_actual}}</small></td>
                        <td><small>{{datos.act_ope_saldo_cuota_actual}}</small></td>
                        <td><small>{{datos.act_ope_saldo_capital_venc}}</small></td>
                        <td><small>{{datos.act_ope_liquidar}}</small></td>
                        <td><small>{{datos.act_ope_fecha_venc ==
                                null?'':fechas.fechaCortaAbt(datos.act_ope_fecha_venc)}}</small></td>
                        <td><small>{{datos.act_ope_fecha_in ==
                                null?'':fechas.fechaCortaAbt(datos.act_ope_fecha_in)}}</small></td>
                        <td><small>{{datos.act_ope_fecha_entrega ==
                                null?'':fechas.fechaCortaAbt(datos.act_ope_fecha_entrega)}}</small></td>
                        <td><small>{{datos.act_ope_observacion_actualizacion}}</small></td>

                    </tr>
                </tbody>
            </table>

        </div>


    </div>
</section>

<section class="modal" id="ModalDocumentos">
    <div class="modal__container card card-primary card-outline" style="min-width: 60%;">
        <div class="col-sm card-header" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalDocumentos()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">Documentos</h2>
            <section>
                <h4>{{Cliente}}</h4>
            </section>
        </div>
        <div class="card-body" style="width: 100%;">
            <section class="row" *ngIf="DocumentosPage === 0">
                <div class="col-md-3 col-sm-6 col-12" style="cursor: pointer;" *ngFor="let datos of DocumentosItem">
                    <div class="info-box  bg-info" (click)="SeleccionAccion(datos.id)">
                        <span class="info-box-icon"><i class="{{datos.icon1}}"></i></span>
                        <div class="info-box-content">
                            <span class="info-box-text">{{datos.label}}</span>
                            <span class="{{datos.icon2}}"></span>
                        </div>
                    </div>
                </div>
            </section>
            <section class="row" *ngIf="DocumentosPage === 1">
                <div class="col-md-4">
                    <div class="form-group">
                        <span title="Cantidad de meses sin gestión">Tipo de Archivo</span>
                        <select class="form-select" [(ngModel)]="selectedTipoDocumento"
                            (change)="SeleccionTipoDocumento($event)">
                            <option value="" disabled selected>Seleccione ...</option>
                            <option *ngFor="let s of TipoDocumentos" [value]="s.id">{{ s.label }}</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-6">
                    <input type="file" class="form-control file-input" accept="{{TipoArchivoCarga}}"
                        [disabled]="!TipoArchivoCarga" (change)="ArchivoSeleccionado($event)" />
                </div>

                <div class="col-md-1">
                    <button class="btn btn-success" (click)="uploadFile()" [disabled]="!selectedArchivo">
                        <i class="fa fa-upload"></i>
                    </button>
                </div>

                <div class="col-md-1">
                    <button class="btn btn-danger" (click)="cancelUpload()" [disabled]="!selectedArchivo">
                        <i class="fa fa-times"></i>
                    </button>
                </div>

                <!-- Vista previa de archivos -->
                <div class="col-12 d-flex align-items-center justify-content-center mt-3" *ngIf="selectedArchivo">

                    <!-- Vista previa de imágenes -->
                    <img *ngIf="esImagen" [src]="urlAbs" style="width: 100%; height: auto; max-height: 500px;" />

                    <!-- Vista previa de PDF -->
                    <ngx-extended-pdf-viewer *ngIf="esPdf" [src]="pdfUrl" backgroundColor="#ffffff"
                        [useBrowserLocale]="true" [handTool]="false" [showHandToolButton]="true"
                        [mobileFriendlyZoom]="'zoom'" style="width: 100%; height: 500px;">
                    </ngx-extended-pdf-viewer>

                </div>
            </section>




        </div>

    </div>
</section>




<section class="modal" id="ModalValorOriginal">
    <div class="modal__container card card-primary card-outline" style="min-width: 60%;">
        <div class="col-sm card-header" style="background-color: var(--color-formulario-primario);">
            <button type="button" (click)="CerrarModalValorOriginal()" class="btn btn-close float-right"></button>
            <h2 class="modal__title Centrar">Valor Original</h2>
        </div>

        <div class="card-body">
            <div class="card direct-chat" *ngIf="ValoresOriginales as p">
                <div class="row">

                    <div class="row invoice-info ml-1 mr-1">
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Días Mora</strong><br>
                                <div class="text-muted">{{p.act_ope_dias_mora}}</div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Int. Mora</strong><br>
                                <div class="text-muted">{{p.act_ope_interes_mora}}</div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Int. Corriente</strong><br>
                                <div class="text-muted">{{p.act_ope_saldo_interes}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Gto. Cobranza</strong><br>
                                <div class="text-muted">{{p.act_ope_gastos_cobranzas}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Saldo CXC</strong><br>
                                <div class="text-muted">{{p.act_ope_saldo_cxc_actual}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Liquidar</strong><br>
                                <div class="text-muted">{{p.act_ope_liquidar}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Originación</strong><br>
                                <div class="text-muted">{{p.act_ope_saldo_interes}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Nº Reestruct</strong><br>
                                <div class="text-muted">{{p.act_ope_gastos_cobranzas}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>cod CXC</strong><br>
                                <div class="text-muted">{{p.act_ope_cod_credito}}</div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Línea</strong><br>
                                <div class="text-muted">{{p.act_ope_linea}}</div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Descripción Unidad Gestión</strong><br>
                                <div class="text-muted">
                                    {{p.act_ope_descrip_unidad_gestion}}</div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Última Act</strong><br>
                                <div class="text-muted">
                                    {{p.act_ope_fecha_pagada == null ?
                                    '':fechas.fechaCortaAbt(p.act_ope_fecha_pagada)}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>F.Incumplim</strong><br>
                                <div class="text-muted">
                                    {{p.act_ope_fecha_up == null ?
                                    '':fechas.fechaCortaAbt(p.act_ope_fecha_up)}}</div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>F.Castigo</strong><br>
                                <div class="text-muted">
                                    {{p.act_ope_fecha_venc == null ?
                                    '':fechas.fechaCortaAbt(p.act_ope_fecha_venc)}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Fecha Compra</strong><br>
                                <div class="text-muted">
                                    {{p.act_ope_fecha_entrega == null ?
                                    '':fechas.fechaCortaAbt(p.act_ope_fecha_entrega)}}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 invoice-col">
                            <div>
                                <strong>Últ. Pago</strong><br>
                                <div class="text-muted">
                                    {{p.act_ope_fecha_compra == null ?
                                    '':fechas.fechaCortaAbt(p.act_ope_fecha_compra)}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
</section>



<ng-template #loadingOrError>
    <section>
        <div class="ContenidoCentrado">
            <div class="loader"></div>
        </div>
    </section>
</ng-template>

<ng-template #loadingOrError1>
    <section>
        <div class="ContenidoCentrado">
            <div class="loaderSecundario"></div>
        </div>
    </section>
</ng-template>

<section class="modal" id="Cargando">
    <section>
        <div class="CentroSobrepuesto">
            <div class="loaderLogin"></div>
        </div>
    </section>
</section>